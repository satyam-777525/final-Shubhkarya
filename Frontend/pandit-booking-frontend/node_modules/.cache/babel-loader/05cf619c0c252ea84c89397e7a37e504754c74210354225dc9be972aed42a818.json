{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Home,CalendarDays,Book,LogOut,ListChecks,MessageCircle,Users,ChevronLeft,ChevronRight,Sparkle,Settings,Star}from\"lucide-react\";import{AnimatePresence,motion}from\"framer-motion\";import AOS from\"aos\";import\"aos/dist/aos.css\";import\"./Dashboard.css\";import{createReview,getBookings,getVerifiedPandits,createBooking,getServices,getPoojas}from\"../api/api\";import ChatWindow from\"./ChatWindow\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const featureCardsData=[{title:\"Live Chat Support\",description:\"Ask spiritual or booking questions to our team – instant help, 7am to 10pm.\",icon:MessageCircle},{title:\"Preferred Pandit Booking\",description:\"Save favorite Pandits, see their next available slots, and book with just one tap.\",icon:Users},{title:\"Festive Offers\",description:\"Special discounts and promo codes for all major festivals and family events.\",icon:Sparkle}];const sidebarLinks=[{label:\"Dashboard\",icon:Home,goto:\"/\"},{label:\"Book Puja\",icon:Book,goto:\"#book-puja\"},{label:\"My Bookings\",icon:CalendarDays,goto:\"#booking\"},{label:\"Reviews\",icon:MessageCircle,goto:\"#review\"},{label:\"Settings\",icon:Settings,goto:\"#settings\"},{label:\"Logout\",icon:LogOut,goto:\"/home\",logout:true}];const sliderImages=[\"/images/i2.jpeg\",\"/images/kalash.jpeg\",\"/images/havan.jpeg\",\"/images/i3.jpeg\",\"/images/i1.jpeg\"];function StarRating(_ref){let{rating,onChange}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"star-rating\",\"aria-label\":\"Rating\",children:[1,2,3,4,5].map(i=>/*#__PURE__*/_jsx(\"span\",{role:\"button\",tabIndex:\"0\",className:`star ${i<=rating?\"active\":\"\"}`,\"aria-label\":`Rate ${i} star${i>1?\"s\":\"\"}`,onClick:()=>onChange(i),onKeyDown:e=>(e.key===\"Enter\"||e.key===\" \")&&onChange(i),children:\"\\u2605\"},i))});}export default function Dashboard(){var _user$name,_upcomingPuja$service;const[user,setUser]=useState(null);const[bookings,setBookings]=useState([]);const[pandits,setPandits]=useState([]);const[poojas,setPoojas]=useState([]);const[collapsed,setCollapsed]=useState(false);const[carouselIndex,setCarouselIndex]=useState(0);const[expandedPandits,setExpandedPandits]=useState({});const[searchPandits,setSearchPandits]=useState(\"\");const[searchBookings,setSearchBookings]=useState(\"\");const[review,setReview]=useState({name:\"\",rating:0,comment:\"\"});const[reviewMessage,setReviewMessage]=useState(\"\");const[reviewLoading,setReviewLoading]=useState(false);const[showChatbot,setShowChatbot]=useState(false);const[chatPanditId,setChatPanditId]=useState(null);const[chatPanditName,setChatPanditName]=useState(\"\");const[currentDateTime,setCurrentDateTime]=useState(\"\");// Booking state\nconst[selectedPanditId,setSelectedPanditId]=useState(\"\");const[selectedServiceId,setSelectedServiceId]=useState(\"\");const[bookingDetails,setBookingDetails]=useState({puja_date:\"\",puja_time:\"\",location:\"\"});const[bookingStatus,setBookingStatus]=useState(null);const[bookingLoading,setBookingLoading]=useState(false);const navigate=useNavigate();const panditListRef=useRef(null);const bookingListRef=useRef(null);// Fetch bookings for the user\nconst fetchBookings=async userId=>{try{const res=await getBookings({userid:userId});setBookings(res.data||[]);}catch(error){console.error(\"Failed to fetch bookings:\",error);}};// Fetch verified pandits\nconst fetchPandits=async()=>{try{const res=await getVerifiedPandits();setPandits(res.data||[]);}catch(error){console.error(\"Failed to fetch pandits:\",error);}};// Fetch all pujas\nconst fetchPoojas=async()=>{try{const res=await getPoojas();setPoojas(res.data||[]);}catch(error){console.error(\"Failed to fetch pujas:\",error);}};// Initialization on mount\nuseEffect(()=>{AOS.init({duration:750,once:true});const token=localStorage.getItem(\"token\");const userData=localStorage.getItem(\"user\");if(!token||!userData){navigate('/login');return;}try{const parsedUser=JSON.parse(userData);setUser(parsedUser);setReview(r=>({...r,name:parsedUser.name}));fetchBookings(parsedUser._id);fetchPandits();fetchPoojas();}catch(e){console.error(\"Failed to parse user data:\",e);localStorage.clear();navigate('/login');}},[navigate]);// Carousel auto-slide\nuseEffect(()=>{const interval=setInterval(()=>{setCarouselIndex(i=>(i+1)%sliderImages.length);},4500);return()=>clearInterval(interval);},[]);// Current date-time every second\nuseEffect(()=>{const itv=setInterval(()=>{setCurrentDateTime(new Date().toLocaleString(\"en-IN\",{dateStyle:\"full\",timeStyle:\"medium\",timeZone:\"Asia/Kolkata\"}));},1000);return()=>clearInterval(itv);},[]);function toggleExpand(id){setExpandedPandits(prev=>({...prev,[id]:!prev[id]}));}const getStatusClass=status=>({accepted:\"status accepted\",confirmed:\"status accepted\",rejected:\"status rejected\",pending:\"status pending\",completed:\"status completed\"})[(status||\"\").toLowerCase()]||\"status\";const filteredPandits=pandits.filter(p=>{var _p$name;return(((_p$name=p.name)===null||_p$name===void 0?void 0:_p$name.toLowerCase())||\"\").includes(searchPandits.toLowerCase())||(p.city||\"\").toLowerCase().includes(searchPandits.toLowerCase())||(p.specialties||[]).some(s=>s.toLowerCase().includes(searchPandits.toLowerCase()));});const filteredBookings=bookings.filter(b=>{var _b$panditid,_b$serviceid;const q=searchBookings.toLowerCase();return(((_b$panditid=b.panditid)===null||_b$panditid===void 0?void 0:_b$panditid.name)||\"\").toLowerCase().includes(q)||(((_b$serviceid=b.serviceid)===null||_b$serviceid===void 0?void 0:_b$serviceid.name)||\"\").toLowerCase().includes(q)||new Date(b.puja_date).toLocaleDateString().includes(q)||(b.location||\"\").toLowerCase().includes(q);});async function handleReviewSubmit(e){e.preventDefault();if(!review.name||!review.comment||!review.rating){setReviewMessage(\"Please complete all fields and provide star rating.\");return;}setReviewLoading(true);try{await createReview(review);setReviewMessage(\"Thank you for your review!\");setReview(r=>({name:r.name,rating:0,comment:\"\"}));}catch(error){console.error(\"Review submission error:\",error);setReviewMessage(\"Failed to submit review.\");}finally{setReviewLoading(false);setTimeout(()=>setReviewMessage(\"\"),2500);}}function handleNavClick(item){if(item.logout){localStorage.clear();navigate(item.goto);}else if(String(item.goto).startsWith(\"#\")){const section=document.querySelector(item.goto);if(section)section.scrollIntoView({behavior:\"smooth\",block:\"start\"});}else{navigate(item.goto);}}function scrollList(ref){let direction=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"left\";if(ref.current){const scrollAmount=320;if(direction===\"left\"){ref.current.scrollBy({left:-scrollAmount,behavior:\"smooth\"});}else{ref.current.scrollBy({left:scrollAmount,behavior:\"smooth\"});}}}function handlePanditSelect(e){const panditId=e.target.value;setSelectedPanditId(panditId);setSelectedServiceId(\"\");setBookingStatus(null);}function handleServiceSelect(e){setSelectedServiceId(e.target.value);setBookingStatus(null);}function handleBookingDetailsChange(e){const{name,value}=e.target;setBookingDetails(b=>({...b,[name]:value}));setBookingStatus(null);}async function handleBookingSubmit(e){e.preventDefault();setBookingStatus(null);if(!selectedPanditId){setBookingStatus({error:\"Please select a Pandit.\"});return;}if(!selectedServiceId){setBookingStatus({error:\"Please select the Puja/service.\"});return;}if(!bookingDetails.puja_date||!bookingDetails.puja_time||!bookingDetails.location.trim()){setBookingStatus({error:\"Please fill all booking details.\"});return;}if(!(user!==null&&user!==void 0&&user._id)){setBookingStatus({error:\"User not found. Please login again.\"});return;}setBookingLoading(true);try{const payload={userId:user._id,panditId:selectedPanditId,serviceid:selectedServiceId,// Make sure this key is exactly 'serviceid' (lowercase)\npuja_date:bookingDetails.puja_date,puja_time:bookingDetails.puja_time,location:bookingDetails.location.trim(),status:\"pending\"};await createBooking(payload);setBookingStatus({success:\"Puja booked successfully! Awaiting Pandit confirmation.\"});fetchBookings(user._id);setSelectedPanditId(\"\");setSelectedServiceId(\"\");setBookingDetails({puja_date:\"\",puja_time:\"\",location:\"\"});}catch(error){var _error$response,_error$response$data;console.error(\"Booking error:\",error);setBookingStatus({error:(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Failed to book puja. Please try again later.\"});}finally{setBookingLoading(false);setTimeout(()=>setBookingStatus(null),3500);}}const totalPujasBooked=bookings.length;const upcomingPuja=bookings.find(b=>new Date(b.puja_date)>=new Date()&&b.status!==\"completed\");const availablePoints=(user===null||user===void 0?void 0:user.points)||450;return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-app-bg orange-theme\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:`sidebar-root${collapsed?\" collapsed\":\"\"}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-brand\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/subh.png\",alt:\"Shubhkarya Logo\",className:\"sidebar-logo\"}),!collapsed&&/*#__PURE__*/_jsx(\"span\",{className:\"sidebar-brand-name\",tabIndex:0,children:\"Shubhkarya\"})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"sidebar-links\",\"aria-label\":\"Main navigation\",children:sidebarLinks.map(_ref2=>{let{label,icon:Icon,goto,logout}=_ref2;return/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-link\",tabIndex:0,onClick:()=>handleNavClick({goto,logout}),\"aria-label\":label,children:[/*#__PURE__*/_jsx(Icon,{size:22,className:\"sidebar-link-icon\",\"aria-hidden\":\"true\"}),!collapsed&&/*#__PURE__*/_jsx(\"span\",{children:label})]},label);})}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-collapse-btn\",onClick:()=>setCollapsed(c=>!c),\"aria-label\":collapsed?\"Expand sidebar\":\"Collapse sidebar\",children:/*#__PURE__*/_jsx(ListChecks,{size:22})})]}),/*#__PURE__*/_jsxs(\"header\",{className:\"header-root\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:(user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0))||\"U\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-welcome\",children:[\"Welcome, \",(user===null||user===void 0?void 0:user.name)||\"Guest\",\"!\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-user-email\",children:(user===null||user===void 0?void 0:user.email)||\"user@example.com\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-datetime\",children:currentDateTime})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"dashboard-main\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"dashboard-overview\",\"data-aos\":\"fade-up\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"Dashboard Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(CalendarDays,{size:32})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Pujas Booked\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:totalPujasBooked})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(Book,{size:32})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Upcoming Puja\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-text\",children:upcomingPuja?(_upcomingPuja$service=upcomingPuja.serviceid)===null||_upcomingPuja$service===void 0?void 0:_upcomingPuja$service.name:\"No upcoming pujas\"}),upcomingPuja&&/*#__PURE__*/_jsx(\"p\",{className:\"stat-subtext\",children:new Date(upcomingPuja.puja_date).toLocaleDateString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(Sparkle,{size:32})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available Points\"}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-number\",children:availablePoints})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"main-cta-btn large-book-btn\",onClick:()=>{const bookPujaSection=document.querySelector(\"#book-puja\");if(bookPujaSection){bookPujaSection.scrollIntoView({behavior:\"smooth\",block:\"start\"});}},children:[/*#__PURE__*/_jsx(Book,{size:20,style:{marginRight:8}}),\"Book Puja Now\"]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"hero-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"hero-title\",children:[\"Experience \",/*#__PURE__*/_jsx(\"span\",{className:\"hero-highlight\",children:\"Auspicious Rituals\"}),\" with Shubhkarya\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"hero-subtitle\",children:\"Book trusted Pandits for your pujas, havans, and ceremonies with elegance and ease. Now enhanced with same-day bookings and instant chat support.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"main-cta-btn\",onClick:()=>{const bookPujaSection=document.querySelector(\"#book-puja\");if(bookPujaSection){bookPujaSection.scrollIntoView({behavior:\"smooth\",block:\"start\"});}},children:\"Book Puja Now\"}),/*#__PURE__*/_jsx(\"button\",{className:\"main-alt-btn\",onClick:()=>{const panditSection=document.querySelector(\"#pandit\");if(panditSection){panditSection.scrollIntoView({behavior:\"smooth\"});}},children:\"Browse Pandits\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"slider-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-frame\",children:[/*#__PURE__*/_jsx(AnimatePresence,{initial:false,mode:\"wait\",children:/*#__PURE__*/_jsx(motion.img,{src:sliderImages[carouselIndex],alt:`Slide ${carouselIndex+1}`,loading:\"lazy\",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:0.5}},carouselIndex)}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-dots\",children:sliderImages.map((_,i)=>/*#__PURE__*/_jsx(\"button\",{className:`carousel-dot${carouselIndex===i?\" active\":\"\"}`,onClick:()=>setCarouselIndex(i),\"aria-label\":`Go to slide ${i+1}`},i))})]})})]}),/*#__PURE__*/_jsx(\"section\",{className:\"dashboard-features\",\"data-aos\":\"fade-up\",children:featureCardsData.map((feature,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[feature.icon&&/*#__PURE__*/_jsx(feature.icon,{size:36,className:\"feature-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:feature.title}),/*#__PURE__*/_jsx(\"p\",{children:feature.description})]},index))}),/*#__PURE__*/_jsxs(\"section\",{id:\"book-puja\",className:\"book-puja-section\",\"aria-label\":\"Book Puja\",tabIndex:-1,\"data-aos\":\"fade-up\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"Book Your Puja\"}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleBookingSubmit,className:\"booking-form\",noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"selectPandit\",children:\"Select Pandit\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"selectPandit\",value:selectedPanditId,onChange:handlePanditSelect,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Choose a Pandit --\"}),filteredPandits.map(p=>/*#__PURE__*/_jsxs(\"option\",{value:p._id,children:[p.name,\" (\",p.city,\")\"]},p._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"selectPuja\",children:\"Select Puja / Service\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"selectPuja\",value:selectedServiceId,onChange:handleServiceSelect,required:true,disabled:poojas.length===0,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:poojas.length>0?\"-- Choose a Puja / Service --\":\"Loading pujas...\"}),poojas.map(pooja=>{var _pooja$price;return/*#__PURE__*/_jsxs(\"option\",{value:pooja._id||pooja.id,children:[pooja.name,\" - \\u20B9\",(_pooja$price=pooja.price)===null||_pooja$price===void 0?void 0:_pooja$price.toLocaleString()]},pooja._id||pooja.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"puja_date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"puja_date\",name:\"puja_date\",value:bookingDetails.puja_date,onChange:handleBookingDetailsChange,min:new Date().toISOString().split(\"T\")[0],required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"puja_time\",children:\"Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",id:\"puja_time\",name:\"puja_time\",value:bookingDetails.puja_time,onChange:handleBookingDetailsChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location\",children:\"Location / Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"location\",name:\"location\",value:bookingDetails.location,onChange:handleBookingDetailsChange,placeholder:\"Enter your location or address\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:bookingLoading,children:bookingLoading?\"Booking...\":\"Confirm Booking\"}),(bookingStatus===null||bookingStatus===void 0?void 0:bookingStatus.error)&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",role:\"alert\",children:bookingStatus.error}),(bookingStatus===null||bookingStatus===void 0?void 0:bookingStatus.success)&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",role:\"alert\",children:bookingStatus.success})]})})]}),/*#__PURE__*/_jsxs(\"section\",{id:\"pandit\",className:\"pandit-section\",tabIndex:-1,\"aria-label\":\"Verified Pandits\",\"data-aos\":\"fade-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"Verified Pandits\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-controls\",children:[/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Scroll pandits left\",onClick:()=>scrollList(panditListRef,\"left\"),className:\"carousel-arrow-btn\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:24})}),/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Scroll pandits right\",onClick:()=>scrollList(panditListRef,\"right\"),className:\"carousel-arrow-btn\",children:/*#__PURE__*/_jsx(ChevronRight,{size:24})})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search by name, city, or specialty...\",value:searchPandits,onChange:e=>setSearchPandits(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"pandit-list\",ref:panditListRef,children:filteredPandits.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-msg\",children:\"No Pandits found matching your search.\"}):filteredPandits.map(pandit=>{var _pandit$languages,_pandit$specialties;return/*#__PURE__*/_jsxs(motion.div,{className:\"pandit-card\",whileHover:{y:-8,scale:1.02},onClick:()=>toggleExpand(pandit._id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"pandit-avatar\",style:{backgroundImage:`url(${pandit.profile_photo_url||\"/images/i1.jpeg\"})`},children:/*#__PURE__*/_jsx(\"span\",{className:\"pandit-avatar-initial\",children:pandit.name.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-info\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"pandit-name\",children:pandit.name}),/*#__PURE__*/_jsx(\"p\",{className:\"pandit-city\",children:pandit.city}),expandedPandits[pandit._id]&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:'auto'},className:\"pandit-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-badges\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"badge\",children:[pandit.experienceYears,\" yrs exp\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"badge\",children:(_pandit$languages=pandit.languages)===null||_pandit$languages===void 0?void 0:_pandit$languages.join(\", \")})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"pandit-specialties\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Specialties:\"}),\" \",(_pandit$specialties=pandit.specialties)===null||_pandit$specialties===void 0?void 0:_pandit$specialties.join(\", \")]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"chat-btn\",onClick:e=>{e.stopPropagation();setChatPanditId(pandit._id);setChatPanditName(pandit.name);},children:[/*#__PURE__*/_jsx(MessageCircle,{size:16,style:{marginRight:6}}),\"Chat with Pandit\"]})]})]},pandit._id);})})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:chatPanditId&&/*#__PURE__*/_jsx(ChatWindow,{userId:user===null||user===void 0?void 0:user._id,panditId:chatPanditId,chatName:chatPanditName,onClose:()=>setChatPanditId(null)})}),/*#__PURE__*/_jsxs(\"section\",{id:\"booking\",className:\"bookings-section\",tabIndex:-1,\"aria-label\":\"My Bookings\",\"data-aos\":\"fade-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"My Bookings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-controls\",children:[/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Scroll bookings left\",onClick:()=>scrollList(bookingListRef,\"left\"),className:\"carousel-arrow-btn\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:24})}),/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Scroll bookings right\",onClick:()=>scrollList(bookingListRef,\"right\"),className:\"carousel-arrow-btn\",children:/*#__PURE__*/_jsx(ChevronRight,{size:24})})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search bookings...\",value:searchBookings,onChange:e=>setSearchBookings(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-list\",ref:bookingListRef,children:filteredBookings.length===0?/*#__PURE__*/_jsxs(\"p\",{className:\"empty-msg\",children:[\"No bookings found.\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"#book-puja\",onClick:e=>{e.preventDefault();document.querySelector(\"#book-puja\").scrollIntoView({behavior:\"smooth\"});},children:\"Book your first puja now!\"})]}):filteredBookings.map(b=>{var _b$serviceid2,_b$panditid$name,_b$panditid2;return/*#__PURE__*/_jsxs(motion.div,{className:\"booking-card\",whileHover:{scale:1.02},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-icon\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"booking-title\",children:(_b$serviceid2=b.serviceid)===null||_b$serviceid2===void 0?void 0:_b$serviceid2.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"booking-date\",children:[new Date(b.puja_date).toLocaleDateString(),\" at \",b.puja_time]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-details\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"booking-pandit\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pandit:\"}),\" \",(_b$panditid$name=(_b$panditid2=b.panditid)===null||_b$panditid2===void 0?void 0:_b$panditid2.name)!==null&&_b$panditid$name!==void 0?_b$panditid$name:\"N/A\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"booking-location\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \\uD83D\\uDCCD \",b.location]}),/*#__PURE__*/_jsx(\"span\",{className:getStatusClass(b.status),children:b.status})]})]},b._id);})})]}),/*#__PURE__*/_jsxs(\"section\",{id:\"review\",className:\"review-section\",tabIndex:-1,\"aria-label\":\"Submit Review\",\"data-aos\":\"fade-up\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"Submit a Review\"}),reviewMessage&&/*#__PURE__*/_jsx(\"p\",{className:reviewMessage.includes(\"Thank you\")?\"success-message\":\"error-message\",role:\"alert\",children:reviewMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleReviewSubmit,className:\"review-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"reviewer-name\",children:\"Your Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"reviewer-name\",type:\"text\",value:(user===null||user===void 0?void 0:user.name)||\"\",disabled:true,className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your Rating\"}),/*#__PURE__*/_jsx(StarRating,{rating:review.rating,onChange:v=>setReview(prev=>({...prev,rating:v}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"review-comment\",children:\"Your Review\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"review-comment\",placeholder:\"Share your experience with Shubhkarya...\",value:review.comment,onChange:e=>setReview(prev=>({...prev,comment:e.target.value})),className:\"form-textarea\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:reviewLoading,children:reviewLoading?\"Submitting...\":\"Submit Review\"})]})]}),/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Toggle Chatbot\",className:\"chatbot-toggle\",onClick:()=>setShowChatbot(s=>!s),children:showChatbot?/*#__PURE__*/_jsx(\"span\",{style:{fontSize:30,color:\"white\"},children:\"\\xD7\"}):/*#__PURE__*/_jsx(\"img\",{src:\"/images/subh.png\",alt:\"Open Chatbot\",style:{borderRadius:\"50%\",width:38,height:38}})}),showChatbot&&/*#__PURE__*/_jsx(\"div\",{className:\"chatbot-popup\",role:\"dialog\",\"aria-modal\":\"true\",\"aria-label\":\"Chatbot window\",children:/*#__PURE__*/_jsx(\"iframe\",{title:\"Chatbot\",src:\"https://www.chatbase.co/chatbot-iframe/usovl2iS71gPfrO5xmRyP\",style:{width:\"100%\",height:\"100%\",border:\"none\",borderRadius:15},allow:\"clipboard-write\"})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","Home","CalendarDays","Book","LogOut","ListChecks","MessageCircle","Users","ChevronLeft","ChevronRight","Sparkle","Settings","Star","AnimatePresence","motion","AOS","createReview","getBookings","getVerifiedPandits","createBooking","getServices","getPoojas","ChatWindow","useNavigate","jsx","_jsx","jsxs","_jsxs","featureCardsData","title","description","icon","sidebarLinks","label","goto","logout","sliderImages","StarRating","_ref","rating","onChange","className","children","map","i","role","tabIndex","onClick","onKeyDown","e","key","Dashboard","_user$name","_upcomingPuja$service","user","setUser","bookings","setBookings","pandits","setPandits","poojas","setPoojas","collapsed","setCollapsed","carouselIndex","setCarouselIndex","expandedPandits","setExpandedPandits","searchPandits","setSearchPandits","searchBookings","setSearchBookings","review","setReview","name","comment","reviewMessage","setReviewMessage","reviewLoading","setReviewLoading","showChatbot","setShowChatbot","chatPanditId","setChatPanditId","chatPanditName","setChatPanditName","currentDateTime","setCurrentDateTime","selectedPanditId","setSelectedPanditId","selectedServiceId","setSelectedServiceId","bookingDetails","setBookingDetails","puja_date","puja_time","location","bookingStatus","setBookingStatus","bookingLoading","setBookingLoading","navigate","panditListRef","bookingListRef","fetchBookings","userId","res","userid","data","error","console","fetchPandits","fetchPoojas","init","duration","once","token","localStorage","getItem","userData","parsedUser","JSON","parse","r","_id","clear","interval","setInterval","length","clearInterval","itv","Date","toLocaleString","dateStyle","timeStyle","timeZone","toggleExpand","id","prev","getStatusClass","status","accepted","confirmed","rejected","pending","completed","toLowerCase","filteredPandits","filter","p","_p$name","includes","city","specialties","some","s","filteredBookings","b","_b$panditid","_b$serviceid","q","panditid","serviceid","toLocaleDateString","handleReviewSubmit","preventDefault","setTimeout","handleNavClick","item","String","startsWith","section","document","querySelector","scrollIntoView","behavior","block","scrollList","ref","direction","arguments","undefined","current","scrollAmount","scrollBy","left","handlePanditSelect","panditId","target","value","handleServiceSelect","handleBookingDetailsChange","handleBookingSubmit","trim","payload","success","_error$response","_error$response$data","response","message","totalPujasBooked","upcomingPuja","find","availablePoints","points","src","alt","_ref2","Icon","size","c","charAt","email","bookPujaSection","style","marginRight","panditSection","initial","mode","img","loading","opacity","x","animate","exit","transition","_","feature","index","onSubmit","noValidate","htmlFor","required","disabled","pooja","_pooja$price","price","type","min","toISOString","split","placeholder","pandit","_pandit$languages","_pandit$specialties","div","whileHover","y","scale","backgroundImage","profile_photo_url","height","experienceYears","languages","join","stopPropagation","chatName","onClose","href","_b$serviceid2","_b$panditid$name","_b$panditid2","v","fontSize","color","borderRadius","width","border","allow"],"sources":["C:/Users/sv106/OneDrive/Desktop/Shubhkarya/Frontend/pandit-booking-frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  Home,\r\n  CalendarDays,\r\n  Book,\r\n  LogOut,\r\n  ListChecks,\r\n  MessageCircle,\r\n  Users,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Sparkle,\r\n  Settings,\r\n  Star,\r\n} from \"lucide-react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport AOS from \"aos\";\r\nimport \"aos/dist/aos.css\";\r\nimport \"./Dashboard.css\";\r\nimport {\r\n  createReview,\r\n  getBookings,\r\n  getVerifiedPandits,\r\n  createBooking,\r\n  getServices,\r\n  getPoojas,\r\n} from \"../api/api\";\r\nimport ChatWindow from \"./ChatWindow\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst featureCardsData = [\r\n  {\r\n    title: \"Live Chat Support\",\r\n    description: \"Ask spiritual or booking questions to our team – instant help, 7am to 10pm.\",\r\n    icon: MessageCircle,\r\n  },\r\n  {\r\n    title: \"Preferred Pandit Booking\",\r\n    description: \"Save favorite Pandits, see their next available slots, and book with just one tap.\",\r\n    icon: Users,\r\n  },\r\n  {\r\n    title: \"Festive Offers\",\r\n    description: \"Special discounts and promo codes for all major festivals and family events.\",\r\n    icon: Sparkle,\r\n  },\r\n];\r\n\r\nconst sidebarLinks = [\r\n  { label: \"Dashboard\", icon: Home, goto: \"/\" },\r\n  { label: \"Book Puja\", icon: Book, goto: \"#book-puja\" },\r\n  { label: \"My Bookings\", icon: CalendarDays, goto: \"#booking\" },\r\n  { label: \"Reviews\", icon: MessageCircle, goto: \"#review\" },\r\n  { label: \"Settings\", icon: Settings, goto: \"#settings\" },\r\n  { label: \"Logout\", icon: LogOut, goto: \"/home\", logout: true },\r\n];\r\n\r\nconst sliderImages = [\r\n  \"/images/i2.jpeg\",\r\n  \"/images/kalash.jpeg\",\r\n  \"/images/havan.jpeg\",\r\n  \"/images/i3.jpeg\",\r\n  \"/images/i1.jpeg\",\r\n];\r\n\r\nfunction StarRating({ rating, onChange }) {\r\n  return (\r\n    <div className=\"star-rating\" aria-label=\"Rating\">\r\n      {[1, 2, 3, 4, 5].map((i) => (\r\n        <span\r\n          key={i}\r\n          role=\"button\"\r\n          tabIndex=\"0\"\r\n          className={`star ${i <= rating ? \"active\" : \"\"}`}\r\n          aria-label={`Rate ${i} star${i > 1 ? \"s\" : \"\"}`}\r\n          onClick={() => onChange(i)}\r\n          onKeyDown={(e) => (e.key === \"Enter\" || e.key === \" \") && onChange(i)}\r\n        >\r\n          ★\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Dashboard() {\r\n  const [user, setUser] = useState(null);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [pandits, setPandits] = useState([]);\r\n  const [poojas, setPoojas] = useState([]);\r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const [carouselIndex, setCarouselIndex] = useState(0);\r\n  const [expandedPandits, setExpandedPandits] = useState({});\r\n  const [searchPandits, setSearchPandits] = useState(\"\");\r\n  const [searchBookings, setSearchBookings] = useState(\"\");\r\n  const [review, setReview] = useState({ name: \"\", rating: 0, comment: \"\" });\r\n  const [reviewMessage, setReviewMessage] = useState(\"\");\r\n  const [reviewLoading, setReviewLoading] = useState(false);\r\n  const [showChatbot, setShowChatbot] = useState(false);\r\n  const [chatPanditId, setChatPanditId] = useState(null);\r\n  const [chatPanditName, setChatPanditName] = useState(\"\");\r\n  const [currentDateTime, setCurrentDateTime] = useState(\"\");\r\n\r\n  // Booking state\r\n  const [selectedPanditId, setSelectedPanditId] = useState(\"\");\r\n  const [selectedServiceId, setSelectedServiceId] = useState(\"\");\r\n  const [bookingDetails, setBookingDetails] = useState({\r\n    puja_date: \"\",\r\n    puja_time: \"\",\r\n    location: \"\",\r\n  });\r\n  const [bookingStatus, setBookingStatus] = useState(null);\r\n  const [bookingLoading, setBookingLoading] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  const panditListRef = useRef(null);\r\n  const bookingListRef = useRef(null);\r\n\r\n  // Fetch bookings for the user\r\n  const fetchBookings = async (userId) => {\r\n    try {\r\n      const res = await getBookings({ userid: userId });\r\n      setBookings(res.data || []);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch bookings:\", error);\r\n    }\r\n  };\r\n\r\n  // Fetch verified pandits\r\n  const fetchPandits = async () => {\r\n    try {\r\n      const res = await getVerifiedPandits();\r\n      setPandits(res.data || []);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch pandits:\", error);\r\n    }\r\n  };\r\n\r\n  // Fetch all pujas\r\n  const fetchPoojas = async () => {\r\n    try {\r\n      const res = await getPoojas();\r\n      setPoojas(res.data || []);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch pujas:\", error);\r\n    }\r\n  };\r\n\r\n  // Initialization on mount\r\n  useEffect(() => {\r\n    AOS.init({ duration: 750, once: true });\r\n    const token = localStorage.getItem(\"token\");\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (!token || !userData) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    try {\r\n      const parsedUser = JSON.parse(userData);\r\n      setUser(parsedUser);\r\n      setReview((r) => ({ ...r, name: parsedUser.name }));\r\n      fetchBookings(parsedUser._id);\r\n      fetchPandits();\r\n      fetchPoojas();\r\n    } catch (e) {\r\n      console.error(\"Failed to parse user data:\", e);\r\n      localStorage.clear();\r\n      navigate('/login');\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Carousel auto-slide\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCarouselIndex((i) => (i + 1) % sliderImages.length);\r\n    }, 4500);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Current date-time every second\r\n  useEffect(() => {\r\n    const itv = setInterval(() => {\r\n      setCurrentDateTime(\r\n        new Date().toLocaleString(\"en-IN\", {\r\n          dateStyle: \"full\",\r\n          timeStyle: \"medium\",\r\n          timeZone: \"Asia/Kolkata\",\r\n        })\r\n      );\r\n    }, 1000);\r\n    return () => clearInterval(itv);\r\n  }, []);\r\n\r\n  function toggleExpand(id) {\r\n    setExpandedPandits((prev) => ({ ...prev, [id]: !prev[id] }));\r\n  }\r\n\r\n  const getStatusClass = (status) =>\r\n    ({\r\n      accepted: \"status accepted\",\r\n      confirmed: \"status accepted\",\r\n      rejected: \"status rejected\",\r\n      pending: \"status pending\",\r\n      completed: \"status completed\",\r\n    }[(status || \"\").toLowerCase()] || \"status\");\r\n\r\n  const filteredPandits = pandits.filter(\r\n    (p) =>\r\n      (p.name?.toLowerCase() || \"\").includes(searchPandits.toLowerCase()) ||\r\n      (p.city || \"\").toLowerCase().includes(searchPandits.toLowerCase()) ||\r\n      (p.specialties || []).some((s) => s.toLowerCase().includes(searchPandits.toLowerCase()))\r\n  );\r\n\r\n  const filteredBookings = bookings.filter((b) => {\r\n    const q = searchBookings.toLowerCase();\r\n    return (\r\n      (b.panditid?.name || \"\").toLowerCase().includes(q) ||\r\n      (b.serviceid?.name || \"\").toLowerCase().includes(q) ||\r\n      new Date(b.puja_date).toLocaleDateString().includes(q) ||\r\n      (b.location || \"\").toLowerCase().includes(q)\r\n    );\r\n  });\r\n\r\n  async function handleReviewSubmit(e) {\r\n    e.preventDefault();\r\n    if (!review.name || !review.comment || !review.rating) {\r\n      setReviewMessage(\"Please complete all fields and provide star rating.\");\r\n      return;\r\n    }\r\n    setReviewLoading(true);\r\n    try {\r\n      await createReview(review);\r\n      setReviewMessage(\"Thank you for your review!\");\r\n      setReview((r) => ({ name: r.name, rating: 0, comment: \"\" }));\r\n    } catch (error) {\r\n      console.error(\"Review submission error:\", error);\r\n      setReviewMessage(\"Failed to submit review.\");\r\n    } finally {\r\n      setReviewLoading(false);\r\n      setTimeout(() => setReviewMessage(\"\"), 2500);\r\n    }\r\n  }\r\n\r\n  function handleNavClick(item) {\r\n    if (item.logout) {\r\n      localStorage.clear();\r\n      navigate(item.goto);\r\n    } else if (String(item.goto).startsWith(\"#\")) {\r\n      const section = document.querySelector(item.goto);\r\n      if (section)\r\n        section.scrollIntoView({\r\n          behavior: \"smooth\",\r\n          block: \"start\",\r\n        });\r\n    } else {\r\n      navigate(item.goto);\r\n    }\r\n  }\r\n\r\n  function scrollList(ref, direction = \"left\") {\r\n    if (ref.current) {\r\n      const scrollAmount = 320;\r\n      if (direction === \"left\") {\r\n        ref.current.scrollBy({ left: -scrollAmount, behavior: \"smooth\" });\r\n      } else {\r\n        ref.current.scrollBy({ left: scrollAmount, behavior: \"smooth\" });\r\n      }\r\n    }\r\n  }\r\n\r\n  function handlePanditSelect(e) {\r\n    const panditId = e.target.value;\r\n    setSelectedPanditId(panditId);\r\n    setSelectedServiceId(\"\");\r\n    setBookingStatus(null);\r\n  }\r\n\r\n  function handleServiceSelect(e) {\r\n    setSelectedServiceId(e.target.value);\r\n    setBookingStatus(null);\r\n  }\r\n\r\n  function handleBookingDetailsChange(e) {\r\n    const { name, value } = e.target;\r\n    setBookingDetails((b) => ({ ...b, [name]: value }));\r\n    setBookingStatus(null);\r\n  }\r\n\r\n  async function handleBookingSubmit(e) {\r\n  e.preventDefault();\r\n  setBookingStatus(null);\r\n\r\n  if (!selectedPanditId) {\r\n    setBookingStatus({ error: \"Please select a Pandit.\" });\r\n    return;\r\n  }\r\n  if (!selectedServiceId) {\r\n    setBookingStatus({ error: \"Please select the Puja/service.\" });\r\n    return;\r\n  }\r\n  if (\r\n    !bookingDetails.puja_date ||\r\n    !bookingDetails.puja_time ||\r\n    !bookingDetails.location.trim()\r\n  ) {\r\n    setBookingStatus({ error: \"Please fill all booking details.\" });\r\n    return;\r\n  }\r\n  if (!user?._id) {\r\n    setBookingStatus({ error: \"User not found. Please login again.\" });\r\n    return;\r\n  }\r\n\r\n  setBookingLoading(true);\r\n\r\n  try {\r\n    const payload = {\r\n  userId: user._id,\r\n  panditId: selectedPanditId,\r\n  serviceid: selectedServiceId, // Make sure this key is exactly 'serviceid' (lowercase)\r\n  puja_date: bookingDetails.puja_date,\r\n  puja_time: bookingDetails.puja_time,\r\n  location: bookingDetails.location.trim(),\r\n  status: \"pending\",\r\n   };\r\n   \r\n\r\n    await createBooking(payload);\r\n\r\n    setBookingStatus({ success: \"Puja booked successfully! Awaiting Pandit confirmation.\" });\r\n    fetchBookings(user._id);\r\n\r\n    setSelectedPanditId(\"\");\r\n    setSelectedServiceId(\"\");\r\n    setBookingDetails({ puja_date: \"\", puja_time: \"\", location: \"\" });\r\n  } catch (error) {\r\n    console.error(\"Booking error:\", error);\r\n    setBookingStatus({\r\n      error:\r\n        error?.response?.data?.message ||\r\n        \"Failed to book puja. Please try again later.\",\r\n    });\r\n  } finally {\r\n    setBookingLoading(false);\r\n    setTimeout(() => setBookingStatus(null), 3500);\r\n  }\r\n}\r\n\r\n\r\n  const totalPujasBooked = bookings.length;\r\n  const upcomingPuja = bookings.find((b) =>\r\n    new Date(b.puja_date) >= new Date() && b.status !== \"completed\"\r\n  );\r\n  const availablePoints = user?.points || 450;\r\n\r\n  return (\r\n    <div className=\"dashboard-app-bg orange-theme\">\r\n      {/* Sidebar */}\r\n      <aside className={`sidebar-root${collapsed ? \" collapsed\" : \"\"}`}>\r\n        <div className=\"sidebar-brand\">\r\n          <img src=\"/images/subh.png\" alt=\"Shubhkarya Logo\" className=\"sidebar-logo\" />\r\n          {!collapsed && (\r\n            <span className=\"sidebar-brand-name\" tabIndex={0}>\r\n              Shubhkarya\r\n            </span>\r\n          )}\r\n        </div>\r\n        <nav className=\"sidebar-links\" aria-label=\"Main navigation\">\r\n          {sidebarLinks.map(({ label, icon: Icon, goto, logout }) => (\r\n            <button\r\n              key={label}\r\n              className=\"sidebar-link\"\r\n              tabIndex={0}\r\n              onClick={() => handleNavClick({ goto, logout })}\r\n              aria-label={label}\r\n            >\r\n              <Icon size={22} className=\"sidebar-link-icon\" aria-hidden=\"true\" />\r\n              {!collapsed && <span>{label}</span>}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n        <button\r\n          className=\"sidebar-collapse-btn\"\r\n          onClick={() => setCollapsed((c) => !c)}\r\n          aria-label={collapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n        >\r\n          <ListChecks size={22} />\r\n        </button>\r\n      </aside>\r\n\r\n      {/* Header */}\r\n      <header className=\"header-root\">\r\n        <div className=\"user-block\">\r\n          <div className=\"user-avatar\">{user?.name?.charAt(0) || \"U\"}</div>\r\n          <div>\r\n            <div className=\"header-user-welcome\">Welcome, {user?.name || \"Guest\"}!</div>\r\n            <div className=\"header-user-email\">{user?.email || \"user@example.com\"}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"header-datetime\">{currentDateTime}</div>\r\n      </header>\r\n\r\n      <main className=\"dashboard-main\">\r\n        {/* Dashboard Overview */}\r\n        <section className=\"dashboard-overview\" data-aos=\"fade-up\">\r\n          <h2 className=\"section-heading\">Dashboard Overview</h2>\r\n          <div className=\"stats-grid\">\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-icon\">\r\n                <CalendarDays size={32} />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <h3>Total Pujas Booked</h3>\r\n                <p className=\"stat-number\">{totalPujasBooked}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-icon\">\r\n                <Book size={32} />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <h3>Upcoming Puja</h3>\r\n                <p className=\"stat-text\">{upcomingPuja ? upcomingPuja.serviceid?.name : \"No upcoming pujas\"}</p>\r\n                {upcomingPuja && (\r\n                  <p className=\"stat-subtext\">{new Date(upcomingPuja.puja_date).toLocaleDateString()}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-icon\">\r\n                <Sparkle size={32} />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <h3>Available Points</h3>\r\n                <p className=\"stat-number\">{availablePoints}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button\r\n            className=\"main-cta-btn large-book-btn\"\r\n            onClick={() => {\r\n              const bookPujaSection = document.querySelector(\"#book-puja\");\r\n              if (bookPujaSection) {\r\n                bookPujaSection.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n              }\r\n            }}\r\n          >\r\n            <Book size={20} style={{ marginRight: 8 }} />\r\n            Book Puja Now\r\n          </button>\r\n        </section>\r\n\r\n        {/* Hero & Slider */}\r\n        <section className=\"hero-section\">\r\n          <div className=\"hero-content\">\r\n            <h1 className=\"hero-title\">\r\n              Experience <span className=\"hero-highlight\">Auspicious Rituals</span> with Shubhkarya\r\n            </h1>\r\n            <p className=\"hero-subtitle\">\r\n              Book trusted Pandits for your pujas, havans, and ceremonies with elegance and ease. Now enhanced with same-day bookings and instant chat support.\r\n            </p>\r\n            <div className=\"hero-actions\">\r\n              <button\r\n                className=\"main-cta-btn\"\r\n                onClick={() => {\r\n                  const bookPujaSection = document.querySelector(\"#book-puja\");\r\n                  if (bookPujaSection) {\r\n                    bookPujaSection.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n                  }\r\n                }}\r\n              >\r\n                Book Puja Now\r\n              </button>\r\n              <button\r\n                className=\"main-alt-btn\"\r\n                onClick={() => {\r\n                  const panditSection = document.querySelector(\"#pandit\");\r\n                  if (panditSection) {\r\n                    panditSection.scrollIntoView({ behavior: \"smooth\" });\r\n                  }\r\n                }}\r\n              >\r\n                Browse Pandits\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"slider-wrapper\">\r\n            <div className=\"carousel-frame\">\r\n              <AnimatePresence initial={false} mode=\"wait\">\r\n                <motion.img\r\n                  key={carouselIndex}\r\n                  src={sliderImages[carouselIndex]}\r\n                  alt={`Slide ${carouselIndex + 1}`}\r\n                  loading=\"lazy\"\r\n                  initial={{ opacity: 0, x: 20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  exit={{ opacity: 0, x: -20 }}\r\n                  transition={{ duration: 0.5 }}\r\n                />\r\n              </AnimatePresence>\r\n              <div className=\"carousel-dots\">\r\n                {sliderImages.map((_, i) => (\r\n                  <button\r\n                    key={i}\r\n                    className={`carousel-dot${carouselIndex === i ? \" active\" : \"\"}`}\r\n                    onClick={() => setCarouselIndex(i)}\r\n                    aria-label={`Go to slide ${i + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Feature Cards */}\r\n        <section className=\"dashboard-features\" data-aos=\"fade-up\">\r\n          {featureCardsData.map((feature, index) => (\r\n            <div className=\"feature-card\" key={index}>\r\n              {feature.icon && <feature.icon size={36} className=\"feature-icon\" />}\r\n              <h3>{feature.title}</h3>\r\n              <p>{feature.description}</p>\r\n            </div>\r\n          ))}\r\n        </section>\r\n\r\n        {/* Book Puja Section */}\r\n        <section id=\"book-puja\" className=\"book-puja-section\" aria-label=\"Book Puja\" tabIndex={-1} data-aos=\"fade-up\">\r\n          <h2 className=\"section-heading\">Book Your Puja</h2>\r\n          <div className=\"booking-form-container\">\r\n            <form onSubmit={handleBookingSubmit} className=\"booking-form\" noValidate>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"selectPandit\">Select Pandit</label>\r\n                <select id=\"selectPandit\" value={selectedPanditId} onChange={handlePanditSelect} required>\r\n                  <option value=\"\">-- Choose a Pandit --</option>\r\n                  {filteredPandits.map((p) => (\r\n                    <option key={p._id} value={p._id}>\r\n                      {p.name} ({p.city})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"selectPuja\">Select Puja / Service</label>\r\n                <select id=\"selectPuja\" value={selectedServiceId} onChange={handleServiceSelect} required disabled={poojas.length === 0}>\r\n                  <option value=\"\">\r\n                    {poojas.length > 0 ? \"-- Choose a Puja / Service --\" : \"Loading pujas...\"}\r\n                  </option>\r\n                  {poojas.map((pooja) => (\r\n                    <option key={pooja._id || pooja.id} value={pooja._id || pooja.id}>\r\n                      {pooja.name} - ₹{pooja.price?.toLocaleString()}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"puja_date\">Date</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"puja_date\"\r\n                    name=\"puja_date\"\r\n                    value={bookingDetails.puja_date}\r\n                    onChange={handleBookingDetailsChange}\r\n                    min={new Date().toISOString().split(\"T\")[0]}\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"puja_time\">Time</label>\r\n                  <input\r\n                    type=\"time\"\r\n                    id=\"puja_time\"\r\n                    name=\"puja_time\"\r\n                    value={bookingDetails.puja_time}\r\n                    onChange={handleBookingDetailsChange}\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"location\">Location / Address</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"location\"\r\n                  name=\"location\"\r\n                  value={bookingDetails.location}\r\n                  onChange={handleBookingDetailsChange}\r\n                  placeholder=\"Enter your location or address\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"submit-btn\" disabled={bookingLoading}>\r\n                {bookingLoading ? \"Booking...\" : \"Confirm Booking\"}\r\n              </button>\r\n\r\n              {bookingStatus?.error && <p className=\"error-message\" role=\"alert\">{bookingStatus.error}</p>}\r\n              {bookingStatus?.success && <p className=\"success-message\" role=\"alert\">{bookingStatus.success}</p>}\r\n            </form>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Verified Pandits */}\r\n        <section id=\"pandit\" className=\"pandit-section\" tabIndex={-1} aria-label=\"Verified Pandits\" data-aos=\"fade-up\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-heading\">Verified Pandits</h2>\r\n            <div className=\"carousel-controls\">\r\n              <button aria-label=\"Scroll pandits left\" onClick={() => scrollList(panditListRef, \"left\")} className=\"carousel-arrow-btn\">\r\n                <ChevronLeft size={24} />\r\n              </button>\r\n              <button aria-label=\"Scroll pandits right\" onClick={() => scrollList(panditListRef, \"right\")} className=\"carousel-arrow-btn\">\r\n                <ChevronRight size={24} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"search-input\"\r\n            placeholder=\"Search by name, city, or specialty...\"\r\n            value={searchPandits}\r\n            onChange={(e) => setSearchPandits(e.target.value)}\r\n          />\r\n          <div className=\"pandit-list\" ref={panditListRef}>\r\n            {filteredPandits.length === 0 ? (\r\n              <p className=\"empty-msg\">No Pandits found matching your search.</p>\r\n            ) : (\r\n              filteredPandits.map((pandit) => (\r\n                <motion.div\r\n                  key={pandit._id}\r\n                  className=\"pandit-card\"\r\n                  whileHover={{ y: -8, scale: 1.02 }}\r\n                  onClick={() => toggleExpand(pandit._id)}\r\n                >\r\n                  <div\r\n                    className=\"pandit-avatar\"\r\n                    style={{\r\n                      backgroundImage: `url(${pandit.profile_photo_url || \"/images/i1.jpeg\"})`,\r\n                    }}\r\n                  >\r\n                    <span className=\"pandit-avatar-initial\">{pandit.name.charAt(0)}</span>\r\n                  </div>\r\n                  <div className=\"pandit-info\">\r\n                    <h4 className=\"pandit-name\">{pandit.name}</h4>\r\n                    <p className=\"pandit-city\">{pandit.city}</p>\r\n                    {expandedPandits[pandit._id] && (\r\n                      <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} className=\"pandit-details\">\r\n                        <div className=\"pandit-badges\">\r\n                          <span className=\"badge\">{pandit.experienceYears} yrs exp</span>\r\n                          <span className=\"badge\">{pandit.languages?.join(\", \")}</span>\r\n                        </div>\r\n                        <p className=\"pandit-specialties\"><strong>Specialties:</strong> {pandit.specialties?.join(\", \")}</p>\r\n                      </motion.div>\r\n                    )}\r\n                    <button\r\n                      className=\"chat-btn\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setChatPanditId(pandit._id);\r\n                        setChatPanditName(pandit.name);\r\n                      }}\r\n                    >\r\n                      <MessageCircle size={16} style={{ marginRight: 6 }} />\r\n                      Chat with Pandit\r\n                    </button>\r\n                  </div>\r\n                </motion.div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        {/* Chat Window */}\r\n        <AnimatePresence>\r\n          {chatPanditId && (\r\n            <ChatWindow userId={user?._id} panditId={chatPanditId} chatName={chatPanditName} onClose={() => setChatPanditId(null)} />\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* My Bookings */}\r\n        <section id=\"booking\" className=\"bookings-section\" tabIndex={-1} aria-label=\"My Bookings\" data-aos=\"fade-up\">\r\n          <div className=\"section-header\">\r\n            <h2 className=\"section-heading\">My Bookings</h2>\r\n            <div className=\"carousel-controls\">\r\n              <button aria-label=\"Scroll bookings left\" onClick={() => scrollList(bookingListRef, \"left\")} className=\"carousel-arrow-btn\">\r\n                <ChevronLeft size={24} />\r\n              </button>\r\n              <button aria-label=\"Scroll bookings right\" onClick={() => scrollList(bookingListRef, \"right\")} className=\"carousel-arrow-btn\">\r\n                <ChevronRight size={24} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"search-input\"\r\n            placeholder=\"Search bookings...\"\r\n            value={searchBookings}\r\n            onChange={(e) => setSearchBookings(e.target.value)}\r\n          />\r\n          <div className=\"booking-list\" ref={bookingListRef}>\r\n            {filteredBookings.length === 0 ? (\r\n              <p className=\"empty-msg\">\r\n                No bookings found.{\" \"}\r\n                <a\r\n                  href=\"#book-puja\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    document.querySelector(\"#book-puja\").scrollIntoView({ behavior: \"smooth\" });\r\n                  }}\r\n                >\r\n                  Book your first puja now!\r\n                </a>\r\n              </p>\r\n            ) : (\r\n              filteredBookings.map((b) => (\r\n                <motion.div key={b._id} className=\"booking-card\" whileHover={{ scale: 1.02 }}>\r\n                  <div className=\"booking-header\">\r\n                    <span className=\"booking-icon\">📅</span>\r\n                    <div>\r\n                      <h4 className=\"booking-title\">{b.serviceid?.name}</h4>\r\n                      <p className=\"booking-date\">{new Date(b.puja_date).toLocaleDateString()} at {b.puja_time}</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"booking-details\">\r\n                    <p className=\"booking-pandit\"><strong>Pandit:</strong> {b.panditid?.name ?? \"N/A\"}</p>\r\n                    <p className=\"booking-location\"><strong>Location:</strong> 📍 {b.location}</p>\r\n                    <span className={getStatusClass(b.status)}>{b.status}</span>\r\n                  </div>\r\n                </motion.div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        {/* Reviews */}\r\n        <section id=\"review\" className=\"review-section\" tabIndex={-1} aria-label=\"Submit Review\" data-aos=\"fade-up\">\r\n          <h2 className=\"section-heading\">Submit a Review</h2>\r\n          {reviewMessage && (\r\n            <p className={reviewMessage.includes(\"Thank you\") ? \"success-message\" : \"error-message\"} role=\"alert\">\r\n              {reviewMessage}\r\n            </p>\r\n          )}\r\n          <form onSubmit={handleReviewSubmit} className=\"review-form\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reviewer-name\">Your Name</label>\r\n              <input id=\"reviewer-name\" type=\"text\" value={user?.name || \"\"} disabled className=\"form-input\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>Your Rating</label>\r\n              <StarRating rating={review.rating} onChange={(v) => setReview((prev) => ({ ...prev, rating: v }))} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"review-comment\">Your Review</label>\r\n              <textarea\r\n                id=\"review-comment\"\r\n                placeholder=\"Share your experience with Shubhkarya...\"\r\n                value={review.comment}\r\n                onChange={(e) => setReview((prev) => ({ ...prev, comment: e.target.value }))}\r\n                className=\"form-textarea\"\r\n                required\r\n              />\r\n            </div>\r\n            <button type=\"submit\" className=\"submit-btn\" disabled={reviewLoading}>\r\n              {reviewLoading ? \"Submitting...\" : \"Submit Review\"}\r\n            </button>\r\n          </form>\r\n        </section>\r\n\r\n        {/* Chatbot Button */}\r\n        <button\r\n          aria-label=\"Toggle Chatbot\"\r\n          className=\"chatbot-toggle\"\r\n          onClick={() => setShowChatbot((s) => !s)}\r\n        >\r\n          {showChatbot ? (\r\n            <span style={{ fontSize: 30, color: \"white\" }}>×</span>\r\n          ) : (\r\n            <img src=\"/images/subh.png\" alt=\"Open Chatbot\" style={{ borderRadius: \"50%\", width: 38, height: 38 }} />\r\n          )}\r\n        </button>\r\n        {showChatbot && (\r\n          <div className=\"chatbot-popup\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Chatbot window\">\r\n            <iframe\r\n              title=\"Chatbot\"\r\n              src=\"https://www.chatbase.co/chatbot-iframe/usovl2iS71gPfrO5xmRyP\"\r\n              style={{ width: \"100%\", height: \"100%\", border: \"none\", borderRadius: 15 }}\r\n              allow=\"clipboard-write\"\r\n            />\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OACEC,IAAI,CACJC,YAAY,CACZC,IAAI,CACJC,MAAM,CACNC,UAAU,CACVC,aAAa,CACbC,KAAK,CACLC,WAAW,CACXC,YAAY,CACZC,OAAO,CACPC,QAAQ,CACRC,IAAI,KACC,cAAc,CACrB,OAASC,eAAe,CAAEC,MAAM,KAAQ,eAAe,CACvD,MAAO,CAAAC,GAAG,KAAM,KAAK,CACrB,MAAO,kBAAkB,CACzB,MAAO,iBAAiB,CACxB,OACEC,YAAY,CACZC,WAAW,CACXC,kBAAkB,CAClBC,aAAa,CACbC,WAAW,CACXC,SAAS,KACJ,YAAY,CACnB,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,gBAAgB,CAAG,CACvB,CACEC,KAAK,CAAE,mBAAmB,CAC1BC,WAAW,CAAE,6EAA6E,CAC1FC,IAAI,CAAEzB,aACR,CAAC,CACD,CACEuB,KAAK,CAAE,0BAA0B,CACjCC,WAAW,CAAE,oFAAoF,CACjGC,IAAI,CAAExB,KACR,CAAC,CACD,CACEsB,KAAK,CAAE,gBAAgB,CACvBC,WAAW,CAAE,8EAA8E,CAC3FC,IAAI,CAAErB,OACR,CAAC,CACF,CAED,KAAM,CAAAsB,YAAY,CAAG,CACnB,CAAEC,KAAK,CAAE,WAAW,CAAEF,IAAI,CAAE9B,IAAI,CAAEiC,IAAI,CAAE,GAAI,CAAC,CAC7C,CAAED,KAAK,CAAE,WAAW,CAAEF,IAAI,CAAE5B,IAAI,CAAE+B,IAAI,CAAE,YAAa,CAAC,CACtD,CAAED,KAAK,CAAE,aAAa,CAAEF,IAAI,CAAE7B,YAAY,CAAEgC,IAAI,CAAE,UAAW,CAAC,CAC9D,CAAED,KAAK,CAAE,SAAS,CAAEF,IAAI,CAAEzB,aAAa,CAAE4B,IAAI,CAAE,SAAU,CAAC,CAC1D,CAAED,KAAK,CAAE,UAAU,CAAEF,IAAI,CAAEpB,QAAQ,CAAEuB,IAAI,CAAE,WAAY,CAAC,CACxD,CAAED,KAAK,CAAE,QAAQ,CAAEF,IAAI,CAAE3B,MAAM,CAAE8B,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,IAAK,CAAC,CAC/D,CAED,KAAM,CAAAC,YAAY,CAAG,CACnB,iBAAiB,CACjB,qBAAqB,CACrB,oBAAoB,CACpB,iBAAiB,CACjB,iBAAiB,CAClB,CAED,QAAS,CAAAC,UAAUA,CAAAC,IAAA,CAAuB,IAAtB,CAAEC,MAAM,CAAEC,QAAS,CAAC,CAAAF,IAAA,CACtC,mBACEb,IAAA,QAAKgB,SAAS,CAAC,aAAa,CAAC,aAAW,QAAQ,CAAAC,QAAA,CAC7C,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAACC,GAAG,CAAEC,CAAC,eACrBnB,IAAA,SAEEoB,IAAI,CAAC,QAAQ,CACbC,QAAQ,CAAC,GAAG,CACZL,SAAS,CAAE,QAAQG,CAAC,EAAIL,MAAM,CAAG,QAAQ,CAAG,EAAE,EAAG,CACjD,aAAY,QAAQK,CAAC,QAAQA,CAAC,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,EAAG,CAChDG,OAAO,CAAEA,CAAA,GAAMP,QAAQ,CAACI,CAAC,CAAE,CAC3BI,SAAS,CAAGC,CAAC,EAAK,CAACA,CAAC,CAACC,GAAG,GAAK,OAAO,EAAID,CAAC,CAACC,GAAG,GAAK,GAAG,GAAKV,QAAQ,CAACI,CAAC,CAAE,CAAAF,QAAA,CACvE,QAED,EATOE,CASD,CACP,CAAC,CACC,CAAC,CAEV,CAEA,cAAe,SAAS,CAAAO,SAASA,CAAA,CAAG,KAAAC,UAAA,CAAAC,qBAAA,CAClC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGzD,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAC0D,QAAQ,CAAEC,WAAW,CAAC,CAAG3D,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC4D,OAAO,CAAEC,UAAU,CAAC,CAAG7D,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC8D,MAAM,CAAEC,SAAS,CAAC,CAAG/D,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACgE,SAAS,CAAEC,YAAY,CAAC,CAAGjE,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACkE,aAAa,CAAEC,gBAAgB,CAAC,CAAGnE,QAAQ,CAAC,CAAC,CAAC,CACrD,KAAM,CAACoE,eAAe,CAAEC,kBAAkB,CAAC,CAAGrE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC1D,KAAM,CAACsE,aAAa,CAAEC,gBAAgB,CAAC,CAAGvE,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACwE,cAAc,CAAEC,iBAAiB,CAAC,CAAGzE,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAAC0E,MAAM,CAAEC,SAAS,CAAC,CAAG3E,QAAQ,CAAC,CAAE4E,IAAI,CAAE,EAAE,CAAEnC,MAAM,CAAE,CAAC,CAAEoC,OAAO,CAAE,EAAG,CAAC,CAAC,CAC1E,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAG/E,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACgF,aAAa,CAAEC,gBAAgB,CAAC,CAAGjF,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACkF,WAAW,CAAEC,cAAc,CAAC,CAAGnF,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACoF,YAAY,CAAEC,eAAe,CAAC,CAAGrF,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACsF,cAAc,CAAEC,iBAAiB,CAAC,CAAGvF,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACwF,eAAe,CAAEC,kBAAkB,CAAC,CAAGzF,QAAQ,CAAC,EAAE,CAAC,CAE1D;AACA,KAAM,CAAC0F,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG3F,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAAC4F,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG7F,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAAC8F,cAAc,CAAEC,iBAAiB,CAAC,CAAG/F,QAAQ,CAAC,CACnDgG,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACF,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGpG,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACqG,cAAc,CAAEC,iBAAiB,CAAC,CAAGtG,QAAQ,CAAC,KAAK,CAAC,CAE3D,KAAM,CAAAuG,QAAQ,CAAG9E,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAA+E,aAAa,CAAGtG,MAAM,CAAC,IAAI,CAAC,CAClC,KAAM,CAAAuG,cAAc,CAAGvG,MAAM,CAAC,IAAI,CAAC,CAEnC;AACA,KAAM,CAAAwG,aAAa,CAAG,KAAO,CAAAC,MAAM,EAAK,CACtC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAzF,WAAW,CAAC,CAAE0F,MAAM,CAAEF,MAAO,CAAC,CAAC,CACjDhD,WAAW,CAACiD,GAAG,CAACE,IAAI,EAAI,EAAE,CAAC,CAC7B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CAAC,CAED;AACA,KAAM,CAAAE,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAL,GAAG,CAAG,KAAM,CAAAxF,kBAAkB,CAAC,CAAC,CACtCyC,UAAU,CAAC+C,GAAG,CAACE,IAAI,EAAI,EAAE,CAAC,CAC5B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED;AACA,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAN,GAAG,CAAG,KAAM,CAAArF,SAAS,CAAC,CAAC,CAC7BwC,SAAS,CAAC6C,GAAG,CAACE,IAAI,EAAI,EAAE,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED;AACA9G,SAAS,CAAC,IAAM,CACdgB,GAAG,CAACkG,IAAI,CAAC,CAAEC,QAAQ,CAAE,GAAG,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CACvC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC7C,GAAI,CAACF,KAAK,EAAI,CAACG,QAAQ,CAAE,CACvBlB,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CACA,GAAI,CACF,KAAM,CAAAmB,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACH,QAAQ,CAAC,CACvChE,OAAO,CAACiE,UAAU,CAAC,CACnB/C,SAAS,CAAEkD,CAAC,GAAM,CAAE,GAAGA,CAAC,CAAEjD,IAAI,CAAE8C,UAAU,CAAC9C,IAAK,CAAC,CAAC,CAAC,CACnD8B,aAAa,CAACgB,UAAU,CAACI,GAAG,CAAC,CAC7Bb,YAAY,CAAC,CAAC,CACdC,WAAW,CAAC,CAAC,CACf,CAAE,MAAO/D,CAAC,CAAE,CACV6D,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAE5D,CAAC,CAAC,CAC9CoE,YAAY,CAACQ,KAAK,CAAC,CAAC,CACpBxB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd;AACAtG,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+H,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjC9D,gBAAgB,CAAErB,CAAC,EAAK,CAACA,CAAC,CAAG,CAAC,EAAIR,YAAY,CAAC4F,MAAM,CAAC,CACxD,CAAC,CAAE,IAAI,CAAC,CACR,MAAO,IAAMC,aAAa,CAACH,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA/H,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmI,GAAG,CAAGH,WAAW,CAAC,IAAM,CAC5BxC,kBAAkB,CAChB,GAAI,CAAA4C,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,CAAE,CACjCC,SAAS,CAAE,MAAM,CACjBC,SAAS,CAAE,QAAQ,CACnBC,QAAQ,CAAE,cACZ,CAAC,CACH,CAAC,CACH,CAAC,CAAE,IAAI,CAAC,CACR,MAAO,IAAMN,aAAa,CAACC,GAAG,CAAC,CACjC,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAM,YAAYA,CAACC,EAAE,CAAE,CACxBtE,kBAAkB,CAAEuE,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE,CAACD,EAAE,EAAG,CAACC,IAAI,CAACD,EAAE,CAAE,CAAC,CAAC,CAAC,CAC9D,CAEA,KAAM,CAAAE,cAAc,CAAIC,MAAM,EAC3B,EACCC,QAAQ,CAAE,iBAAiB,CAC3BC,SAAS,CAAE,iBAAiB,CAC5BC,QAAQ,CAAE,iBAAiB,CAC3BC,OAAO,CAAE,gBAAgB,CACzBC,SAAS,CAAE,kBACb,CAAC,EAAC,CAACL,MAAM,EAAI,EAAE,EAAEM,WAAW,CAAC,CAAC,CAAC,EAAI,QAAS,CAE9C,KAAM,CAAAC,eAAe,CAAGzF,OAAO,CAAC0F,MAAM,CACnCC,CAAC,OAAAC,OAAA,OACA,CAAC,EAAAA,OAAA,CAAAD,CAAC,CAAC3E,IAAI,UAAA4E,OAAA,iBAANA,OAAA,CAAQJ,WAAW,CAAC,CAAC,GAAI,EAAE,EAAEK,QAAQ,CAACnF,aAAa,CAAC8E,WAAW,CAAC,CAAC,CAAC,EACnE,CAACG,CAAC,CAACG,IAAI,EAAI,EAAE,EAAEN,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACnF,aAAa,CAAC8E,WAAW,CAAC,CAAC,CAAC,EAClE,CAACG,CAAC,CAACI,WAAW,EAAI,EAAE,EAAEC,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACT,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACnF,aAAa,CAAC8E,WAAW,CAAC,CAAC,CAAC,CAAC,EAC5F,CAAC,CAED,KAAM,CAAAU,gBAAgB,CAAGpG,QAAQ,CAAC4F,MAAM,CAAES,CAAC,EAAK,KAAAC,WAAA,CAAAC,YAAA,CAC9C,KAAM,CAAAC,CAAC,CAAG1F,cAAc,CAAC4E,WAAW,CAAC,CAAC,CACtC,MACE,CAAC,EAAAY,WAAA,CAAAD,CAAC,CAACI,QAAQ,UAAAH,WAAA,iBAAVA,WAAA,CAAYpF,IAAI,GAAI,EAAE,EAAEwE,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACS,CAAC,CAAC,EAClD,CAAC,EAAAD,YAAA,CAAAF,CAAC,CAACK,SAAS,UAAAH,YAAA,iBAAXA,YAAA,CAAarF,IAAI,GAAI,EAAE,EAAEwE,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACS,CAAC,CAAC,EACnD,GAAI,CAAA7B,IAAI,CAAC0B,CAAC,CAAC/D,SAAS,CAAC,CAACqE,kBAAkB,CAAC,CAAC,CAACZ,QAAQ,CAACS,CAAC,CAAC,EACtD,CAACH,CAAC,CAAC7D,QAAQ,EAAI,EAAE,EAAEkD,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACS,CAAC,CAAC,CAEhD,CAAC,CAAC,CAEF,cAAe,CAAAI,kBAAkBA,CAACnH,CAAC,CAAE,CACnCA,CAAC,CAACoH,cAAc,CAAC,CAAC,CAClB,GAAI,CAAC7F,MAAM,CAACE,IAAI,EAAI,CAACF,MAAM,CAACG,OAAO,EAAI,CAACH,MAAM,CAACjC,MAAM,CAAE,CACrDsC,gBAAgB,CAAC,qDAAqD,CAAC,CACvE,OACF,CACAE,gBAAgB,CAAC,IAAI,CAAC,CACtB,GAAI,CACF,KAAM,CAAA/D,YAAY,CAACwD,MAAM,CAAC,CAC1BK,gBAAgB,CAAC,4BAA4B,CAAC,CAC9CJ,SAAS,CAAEkD,CAAC,GAAM,CAAEjD,IAAI,CAAEiD,CAAC,CAACjD,IAAI,CAAEnC,MAAM,CAAE,CAAC,CAAEoC,OAAO,CAAE,EAAG,CAAC,CAAC,CAAC,CAC9D,CAAE,MAAOkC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDhC,gBAAgB,CAAC,0BAA0B,CAAC,CAC9C,CAAC,OAAS,CACRE,gBAAgB,CAAC,KAAK,CAAC,CACvBuF,UAAU,CAAC,IAAMzF,gBAAgB,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC9C,CACF,CAEA,QAAS,CAAA0F,cAAcA,CAACC,IAAI,CAAE,CAC5B,GAAIA,IAAI,CAACrI,MAAM,CAAE,CACfkF,YAAY,CAACQ,KAAK,CAAC,CAAC,CACpBxB,QAAQ,CAACmE,IAAI,CAACtI,IAAI,CAAC,CACrB,CAAC,IAAM,IAAIuI,MAAM,CAACD,IAAI,CAACtI,IAAI,CAAC,CAACwI,UAAU,CAAC,GAAG,CAAC,CAAE,CAC5C,KAAM,CAAAC,OAAO,CAAGC,QAAQ,CAACC,aAAa,CAACL,IAAI,CAACtI,IAAI,CAAC,CACjD,GAAIyI,OAAO,CACTA,OAAO,CAACG,cAAc,CAAC,CACrBC,QAAQ,CAAE,QAAQ,CAClBC,KAAK,CAAE,OACT,CAAC,CAAC,CACN,CAAC,IAAM,CACL3E,QAAQ,CAACmE,IAAI,CAACtI,IAAI,CAAC,CACrB,CACF,CAEA,QAAS,CAAA+I,UAAUA,CAACC,GAAG,CAAsB,IAApB,CAAAC,SAAS,CAAAC,SAAA,CAAApD,MAAA,IAAAoD,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,MAAM,CACzC,GAAIF,GAAG,CAACI,OAAO,CAAE,CACf,KAAM,CAAAC,YAAY,CAAG,GAAG,CACxB,GAAIJ,SAAS,GAAK,MAAM,CAAE,CACxBD,GAAG,CAACI,OAAO,CAACE,QAAQ,CAAC,CAAEC,IAAI,CAAE,CAACF,YAAY,CAAER,QAAQ,CAAE,QAAS,CAAC,CAAC,CACnE,CAAC,IAAM,CACLG,GAAG,CAACI,OAAO,CAACE,QAAQ,CAAC,CAAEC,IAAI,CAAEF,YAAY,CAAER,QAAQ,CAAE,QAAS,CAAC,CAAC,CAClE,CACF,CACF,CAEA,QAAS,CAAAW,kBAAkBA,CAACzI,CAAC,CAAE,CAC7B,KAAM,CAAA0I,QAAQ,CAAG1I,CAAC,CAAC2I,MAAM,CAACC,KAAK,CAC/BpG,mBAAmB,CAACkG,QAAQ,CAAC,CAC7BhG,oBAAoB,CAAC,EAAE,CAAC,CACxBO,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAEA,QAAS,CAAA4F,mBAAmBA,CAAC7I,CAAC,CAAE,CAC9B0C,oBAAoB,CAAC1C,CAAC,CAAC2I,MAAM,CAACC,KAAK,CAAC,CACpC3F,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAEA,QAAS,CAAA6F,0BAA0BA,CAAC9I,CAAC,CAAE,CACrC,KAAM,CAAEyB,IAAI,CAAEmH,KAAM,CAAC,CAAG5I,CAAC,CAAC2I,MAAM,CAChC/F,iBAAiB,CAAEgE,CAAC,GAAM,CAAE,GAAGA,CAAC,CAAE,CAACnF,IAAI,EAAGmH,KAAM,CAAC,CAAC,CAAC,CACnD3F,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAEA,cAAe,CAAA8F,mBAAmBA,CAAC/I,CAAC,CAAE,CACtCA,CAAC,CAACoH,cAAc,CAAC,CAAC,CAClBnE,gBAAgB,CAAC,IAAI,CAAC,CAEtB,GAAI,CAACV,gBAAgB,CAAE,CACrBU,gBAAgB,CAAC,CAAEW,KAAK,CAAE,yBAA0B,CAAC,CAAC,CACtD,OACF,CACA,GAAI,CAACnB,iBAAiB,CAAE,CACtBQ,gBAAgB,CAAC,CAAEW,KAAK,CAAE,iCAAkC,CAAC,CAAC,CAC9D,OACF,CACA,GACE,CAACjB,cAAc,CAACE,SAAS,EACzB,CAACF,cAAc,CAACG,SAAS,EACzB,CAACH,cAAc,CAACI,QAAQ,CAACiG,IAAI,CAAC,CAAC,CAC/B,CACA/F,gBAAgB,CAAC,CAAEW,KAAK,CAAE,kCAAmC,CAAC,CAAC,CAC/D,OACF,CACA,GAAI,EAACvD,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEsE,GAAG,EAAE,CACd1B,gBAAgB,CAAC,CAAEW,KAAK,CAAE,qCAAsC,CAAC,CAAC,CAClE,OACF,CAEAT,iBAAiB,CAAC,IAAI,CAAC,CAEvB,GAAI,CACF,KAAM,CAAA8F,OAAO,CAAG,CAClBzF,MAAM,CAAEnD,IAAI,CAACsE,GAAG,CAChB+D,QAAQ,CAAEnG,gBAAgB,CAC1B0E,SAAS,CAAExE,iBAAiB,CAAE;AAC9BI,SAAS,CAAEF,cAAc,CAACE,SAAS,CACnCC,SAAS,CAAEH,cAAc,CAACG,SAAS,CACnCC,QAAQ,CAAEJ,cAAc,CAACI,QAAQ,CAACiG,IAAI,CAAC,CAAC,CACxCrD,MAAM,CAAE,SACP,CAAC,CAGA,KAAM,CAAAzH,aAAa,CAAC+K,OAAO,CAAC,CAE5BhG,gBAAgB,CAAC,CAAEiG,OAAO,CAAE,yDAA0D,CAAC,CAAC,CACxF3F,aAAa,CAAClD,IAAI,CAACsE,GAAG,CAAC,CAEvBnC,mBAAmB,CAAC,EAAE,CAAC,CACvBE,oBAAoB,CAAC,EAAE,CAAC,CACxBE,iBAAiB,CAAC,CAAEC,SAAS,CAAE,EAAE,CAAEC,SAAS,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CACnE,CAAE,MAAOa,KAAK,CAAE,KAAAuF,eAAA,CAAAC,oBAAA,CACdvF,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtCX,gBAAgB,CAAC,CACfW,KAAK,CACH,CAAAA,KAAK,SAALA,KAAK,kBAAAuF,eAAA,CAALvF,KAAK,CAAEyF,QAAQ,UAAAF,eAAA,kBAAAC,oBAAA,CAAfD,eAAA,CAAiBxF,IAAI,UAAAyF,oBAAA,iBAArBA,oBAAA,CAAuBE,OAAO,GAC9B,8CACJ,CAAC,CAAC,CACJ,CAAC,OAAS,CACRnG,iBAAiB,CAAC,KAAK,CAAC,CACxBkE,UAAU,CAAC,IAAMpE,gBAAgB,CAAC,IAAI,CAAC,CAAE,IAAI,CAAC,CAChD,CACF,CAGE,KAAM,CAAAsG,gBAAgB,CAAGhJ,QAAQ,CAACwE,MAAM,CACxC,KAAM,CAAAyE,YAAY,CAAGjJ,QAAQ,CAACkJ,IAAI,CAAE7C,CAAC,EACnC,GAAI,CAAA1B,IAAI,CAAC0B,CAAC,CAAC/D,SAAS,CAAC,EAAI,GAAI,CAAAqC,IAAI,CAAC,CAAC,EAAI0B,CAAC,CAACjB,MAAM,GAAK,WACtD,CAAC,CACD,KAAM,CAAA+D,eAAe,CAAG,CAAArJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsJ,MAAM,GAAI,GAAG,CAE3C,mBACEjL,KAAA,QAAKc,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAE5Cf,KAAA,UAAOc,SAAS,CAAE,eAAeqB,SAAS,CAAG,YAAY,CAAG,EAAE,EAAG,CAAApB,QAAA,eAC/Df,KAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BjB,IAAA,QAAKoL,GAAG,CAAC,kBAAkB,CAACC,GAAG,CAAC,iBAAiB,CAACrK,SAAS,CAAC,cAAc,CAAE,CAAC,CAC5E,CAACqB,SAAS,eACTrC,IAAA,SAAMgB,SAAS,CAAC,oBAAoB,CAACK,QAAQ,CAAE,CAAE,CAAAJ,QAAA,CAAC,YAElD,CAAM,CACP,EACE,CAAC,cACNjB,IAAA,QAAKgB,SAAS,CAAC,eAAe,CAAC,aAAW,iBAAiB,CAAAC,QAAA,CACxDV,YAAY,CAACW,GAAG,CAACoK,KAAA,MAAC,CAAE9K,KAAK,CAAEF,IAAI,CAAEiL,IAAI,CAAE9K,IAAI,CAAEC,MAAO,CAAC,CAAA4K,KAAA,oBACpDpL,KAAA,WAEEc,SAAS,CAAC,cAAc,CACxBK,QAAQ,CAAE,CAAE,CACZC,OAAO,CAAEA,CAAA,GAAMwH,cAAc,CAAC,CAAErI,IAAI,CAAEC,MAAO,CAAC,CAAE,CAChD,aAAYF,KAAM,CAAAS,QAAA,eAElBjB,IAAA,CAACuL,IAAI,EAACC,IAAI,CAAE,EAAG,CAACxK,SAAS,CAAC,mBAAmB,CAAC,cAAY,MAAM,CAAE,CAAC,CAClE,CAACqB,SAAS,eAAIrC,IAAA,SAAAiB,QAAA,CAAOT,KAAK,CAAO,CAAC,GAP9BA,KAQC,CAAC,EACV,CAAC,CACC,CAAC,cACNR,IAAA,WACEgB,SAAS,CAAC,sBAAsB,CAChCM,OAAO,CAAEA,CAAA,GAAMgB,YAAY,CAAEmJ,CAAC,EAAK,CAACA,CAAC,CAAE,CACvC,aAAYpJ,SAAS,CAAG,gBAAgB,CAAG,kBAAmB,CAAApB,QAAA,cAE9DjB,IAAA,CAACpB,UAAU,EAAC4M,IAAI,CAAE,EAAG,CAAE,CAAC,CAClB,CAAC,EACJ,CAAC,cAGRtL,KAAA,WAAQc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC7Bf,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,QAAKgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,CAAAY,IAAI,SAAJA,IAAI,kBAAAF,UAAA,CAAJE,IAAI,CAAEoB,IAAI,UAAAtB,UAAA,iBAAVA,UAAA,CAAY+J,MAAM,CAAC,CAAC,CAAC,GAAI,GAAG,CAAM,CAAC,cACjExL,KAAA,QAAAe,QAAA,eACEf,KAAA,QAAKc,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAAC,WAAS,CAAC,CAAAY,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoB,IAAI,GAAI,OAAO,CAAC,GAAC,EAAK,CAAC,cAC5EjD,IAAA,QAAKgB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAE,CAAAY,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8J,KAAK,GAAI,kBAAkB,CAAM,CAAC,EACzE,CAAC,EACH,CAAC,cACN3L,IAAA,QAAKgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAE4C,eAAe,CAAM,CAAC,EAClD,CAAC,cAET3D,KAAA,SAAMc,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAE9Bf,KAAA,YAASc,SAAS,CAAC,oBAAoB,CAAC,WAAS,SAAS,CAAAC,QAAA,eACxDjB,IAAA,OAAIgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,cACvDf,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBf,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjB,IAAA,QAAKgB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBjB,IAAA,CAACvB,YAAY,EAAC+M,IAAI,CAAE,EAAG,CAAE,CAAC,CACvB,CAAC,cACNtL,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjB,IAAA,OAAAiB,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BjB,IAAA,MAAGgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE8J,gBAAgB,CAAI,CAAC,EAC9C,CAAC,EACH,CAAC,cACN7K,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjB,IAAA,QAAKgB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBjB,IAAA,CAACtB,IAAI,EAAC8M,IAAI,CAAE,EAAG,CAAE,CAAC,CACf,CAAC,cACNtL,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjB,IAAA,OAAAiB,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBjB,IAAA,MAAGgB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE+J,YAAY,EAAApJ,qBAAA,CAAGoJ,YAAY,CAACvC,SAAS,UAAA7G,qBAAA,iBAAtBA,qBAAA,CAAwBqB,IAAI,CAAG,mBAAmB,CAAI,CAAC,CAC/F+H,YAAY,eACXhL,IAAA,MAAGgB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAE,GAAI,CAAAyF,IAAI,CAACsE,YAAY,CAAC3G,SAAS,CAAC,CAACqE,kBAAkB,CAAC,CAAC,CAAI,CACvF,EACE,CAAC,EACH,CAAC,cACNxI,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjB,IAAA,QAAKgB,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBjB,IAAA,CAACf,OAAO,EAACuM,IAAI,CAAE,EAAG,CAAE,CAAC,CAClB,CAAC,cACNtL,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjB,IAAA,OAAAiB,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBjB,IAAA,MAAGgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEiK,eAAe,CAAI,CAAC,EAC7C,CAAC,EACH,CAAC,EACH,CAAC,cACNhL,KAAA,WACEc,SAAS,CAAC,6BAA6B,CACvCM,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAsK,eAAe,CAAGzC,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC,CAC5D,GAAIwC,eAAe,CAAE,CACnBA,eAAe,CAACvC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAAC,CACxE,CACF,CAAE,CAAAtI,QAAA,eAEFjB,IAAA,CAACtB,IAAI,EAAC8M,IAAI,CAAE,EAAG,CAACK,KAAK,CAAE,CAAEC,WAAW,CAAE,CAAE,CAAE,CAAE,CAAC,gBAE/C,EAAQ,CAAC,EACF,CAAC,cAGV5L,KAAA,YAASc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC/Bf,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3Bf,KAAA,OAAIc,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,aACd,cAAAjB,IAAA,SAAMgB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,oBAAkB,CAAM,CAAC,mBACvE,EAAI,CAAC,cACLjB,IAAA,MAAGgB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,mJAE7B,CAAG,CAAC,cACJf,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjB,IAAA,WACEgB,SAAS,CAAC,cAAc,CACxBM,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAsK,eAAe,CAAGzC,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC,CAC5D,GAAIwC,eAAe,CAAE,CACnBA,eAAe,CAACvC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAAC,CACxE,CACF,CAAE,CAAAtI,QAAA,CACH,eAED,CAAQ,CAAC,cACTjB,IAAA,WACEgB,SAAS,CAAC,cAAc,CACxBM,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAyK,aAAa,CAAG5C,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC,CACvD,GAAI2C,aAAa,CAAE,CACjBA,aAAa,CAAC1C,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CACtD,CACF,CAAE,CAAArI,QAAA,CACH,gBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cACNjB,IAAA,QAAKgB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7Bf,KAAA,QAAKc,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjB,IAAA,CAACZ,eAAe,EAAC4M,OAAO,CAAE,KAAM,CAACC,IAAI,CAAC,MAAM,CAAAhL,QAAA,cAC1CjB,IAAA,CAACX,MAAM,CAAC6M,GAAG,EAETd,GAAG,CAAEzK,YAAY,CAAC4B,aAAa,CAAE,CACjC8I,GAAG,CAAE,SAAS9I,aAAa,CAAG,CAAC,EAAG,CAClC4J,OAAO,CAAC,MAAM,CACdH,OAAO,CAAE,CAAEI,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,IAAI,CAAE,CAAEH,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAC7BG,UAAU,CAAE,CAAE/G,QAAQ,CAAE,GAAI,CAAE,EAPzBlD,aAQN,CAAC,CACa,CAAC,cAClBvC,IAAA,QAAKgB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BN,YAAY,CAACO,GAAG,CAAC,CAACuL,CAAC,CAAEtL,CAAC,gBACrBnB,IAAA,WAEEgB,SAAS,CAAE,eAAeuB,aAAa,GAAKpB,CAAC,CAAG,SAAS,CAAG,EAAE,EAAG,CACjEG,OAAO,CAAEA,CAAA,GAAMkB,gBAAgB,CAACrB,CAAC,CAAE,CACnC,aAAY,eAAeA,CAAC,CAAG,CAAC,EAAG,EAH9BA,CAIN,CACF,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,EACC,CAAC,cAGVnB,IAAA,YAASgB,SAAS,CAAC,oBAAoB,CAAC,WAAS,SAAS,CAAAC,QAAA,CACvDd,gBAAgB,CAACe,GAAG,CAAC,CAACwL,OAAO,CAAEC,KAAK,gBACnCzM,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1ByL,OAAO,CAACpM,IAAI,eAAIN,IAAA,CAAC0M,OAAO,CAACpM,IAAI,EAACkL,IAAI,CAAE,EAAG,CAACxK,SAAS,CAAC,cAAc,CAAE,CAAC,cACpEhB,IAAA,OAAAiB,QAAA,CAAKyL,OAAO,CAACtM,KAAK,CAAK,CAAC,cACxBJ,IAAA,MAAAiB,QAAA,CAAIyL,OAAO,CAACrM,WAAW,CAAI,CAAC,GAHKsM,KAI9B,CACN,CAAC,CACK,CAAC,cAGVzM,KAAA,YAAS8G,EAAE,CAAC,WAAW,CAAChG,SAAS,CAAC,mBAAmB,CAAC,aAAW,WAAW,CAACK,QAAQ,CAAE,CAAC,CAAE,CAAC,WAAS,SAAS,CAAAJ,QAAA,eAC3GjB,IAAA,OAAIgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACnDjB,IAAA,QAAKgB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrCf,KAAA,SAAM0M,QAAQ,CAAErC,mBAAoB,CAACvJ,SAAS,CAAC,cAAc,CAAC6L,UAAU,MAAA5L,QAAA,eACtEf,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,cAAc,CAAA7L,QAAA,CAAC,eAAa,CAAO,CAAC,cACnDf,KAAA,WAAQ8G,EAAE,CAAC,cAAc,CAACoD,KAAK,CAAErG,gBAAiB,CAAChD,QAAQ,CAAEkJ,kBAAmB,CAAC8C,QAAQ,MAAA9L,QAAA,eACvFjB,IAAA,WAAQoK,KAAK,CAAC,EAAE,CAAAnJ,QAAA,CAAC,uBAAqB,CAAQ,CAAC,CAC9CyG,eAAe,CAACxG,GAAG,CAAE0G,CAAC,eACrB1H,KAAA,WAAoBkK,KAAK,CAAExC,CAAC,CAACzB,GAAI,CAAAlF,QAAA,EAC9B2G,CAAC,CAAC3E,IAAI,CAAC,IAAE,CAAC2E,CAAC,CAACG,IAAI,CAAC,GACpB,GAFaH,CAAC,CAACzB,GAEP,CACT,CAAC,EACI,CAAC,EACN,CAAC,cAENjG,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,YAAY,CAAA7L,QAAA,CAAC,uBAAqB,CAAO,CAAC,cACzDf,KAAA,WAAQ8G,EAAE,CAAC,YAAY,CAACoD,KAAK,CAAEnG,iBAAkB,CAAClD,QAAQ,CAAEsJ,mBAAoB,CAAC0C,QAAQ,MAACC,QAAQ,CAAE7K,MAAM,CAACoE,MAAM,GAAK,CAAE,CAAAtF,QAAA,eACtHjB,IAAA,WAAQoK,KAAK,CAAC,EAAE,CAAAnJ,QAAA,CACbkB,MAAM,CAACoE,MAAM,CAAG,CAAC,CAAG,+BAA+B,CAAG,kBAAkB,CACnE,CAAC,CACRpE,MAAM,CAACjB,GAAG,CAAE+L,KAAK,OAAAC,YAAA,oBAChBhN,KAAA,WAAoCkK,KAAK,CAAE6C,KAAK,CAAC9G,GAAG,EAAI8G,KAAK,CAACjG,EAAG,CAAA/F,QAAA,EAC9DgM,KAAK,CAAChK,IAAI,CAAC,WAAI,EAAAiK,YAAA,CAACD,KAAK,CAACE,KAAK,UAAAD,YAAA,iBAAXA,YAAA,CAAavG,cAAc,CAAC,CAAC,GADnCsG,KAAK,CAAC9G,GAAG,EAAI8G,KAAK,CAACjG,EAExB,CAAC,EACV,CAAC,EACI,CAAC,EACN,CAAC,cAEN9G,KAAA,QAAKc,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBf,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,WAAW,CAAA7L,QAAA,CAAC,MAAI,CAAO,CAAC,cACvCjB,IAAA,UACEoN,IAAI,CAAC,MAAM,CACXpG,EAAE,CAAC,WAAW,CACd/D,IAAI,CAAC,WAAW,CAChBmH,KAAK,CAAEjG,cAAc,CAACE,SAAU,CAChCtD,QAAQ,CAAEuJ,0BAA2B,CACrC+C,GAAG,CAAE,GAAI,CAAA3G,IAAI,CAAC,CAAC,CAAC4G,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE,CAC5CR,QAAQ,MACT,CAAC,EACC,CAAC,cAEN7M,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,WAAW,CAAA7L,QAAA,CAAC,MAAI,CAAO,CAAC,cACvCjB,IAAA,UACEoN,IAAI,CAAC,MAAM,CACXpG,EAAE,CAAC,WAAW,CACd/D,IAAI,CAAC,WAAW,CAChBmH,KAAK,CAAEjG,cAAc,CAACG,SAAU,CAChCvD,QAAQ,CAAEuJ,0BAA2B,CACrCyC,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cAEN7M,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,UAAU,CAAA7L,QAAA,CAAC,oBAAkB,CAAO,CAAC,cACpDjB,IAAA,UACEoN,IAAI,CAAC,MAAM,CACXpG,EAAE,CAAC,UAAU,CACb/D,IAAI,CAAC,UAAU,CACfmH,KAAK,CAAEjG,cAAc,CAACI,QAAS,CAC/BxD,QAAQ,CAAEuJ,0BAA2B,CACrCkD,WAAW,CAAC,gCAAgC,CAC5CT,QAAQ,MACT,CAAC,EACC,CAAC,cAEN/M,IAAA,WAAQoN,IAAI,CAAC,QAAQ,CAACpM,SAAS,CAAC,YAAY,CAACgM,QAAQ,CAAEtI,cAAe,CAAAzD,QAAA,CACnEyD,cAAc,CAAG,YAAY,CAAG,iBAAiB,CAC5C,CAAC,CAER,CAAAF,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEY,KAAK,gBAAIpF,IAAA,MAAGgB,SAAS,CAAC,eAAe,CAACI,IAAI,CAAC,OAAO,CAAAH,QAAA,CAAEuD,aAAa,CAACY,KAAK,CAAI,CAAC,CAC3F,CAAAZ,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEkG,OAAO,gBAAI1K,IAAA,MAAGgB,SAAS,CAAC,iBAAiB,CAACI,IAAI,CAAC,OAAO,CAAAH,QAAA,CAAEuD,aAAa,CAACkG,OAAO,CAAI,CAAC,EAC9F,CAAC,CACJ,CAAC,EACC,CAAC,cAGVxK,KAAA,YAAS8G,EAAE,CAAC,QAAQ,CAAChG,SAAS,CAAC,gBAAgB,CAACK,QAAQ,CAAE,CAAC,CAAE,CAAC,aAAW,kBAAkB,CAAC,WAAS,SAAS,CAAAJ,QAAA,eAC5Gf,KAAA,QAAKc,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjB,IAAA,OAAIgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACrDf,KAAA,QAAKc,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCjB,IAAA,WAAQ,aAAW,qBAAqB,CAACsB,OAAO,CAAEA,CAAA,GAAMkI,UAAU,CAAC3E,aAAa,CAAE,MAAM,CAAE,CAAC7D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACvHjB,IAAA,CAACjB,WAAW,EAACyM,IAAI,CAAE,EAAG,CAAE,CAAC,CACnB,CAAC,cACTxL,IAAA,WAAQ,aAAW,sBAAsB,CAACsB,OAAO,CAAEA,CAAA,GAAMkI,UAAU,CAAC3E,aAAa,CAAE,OAAO,CAAE,CAAC7D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACzHjB,IAAA,CAAChB,YAAY,EAACwM,IAAI,CAAE,EAAG,CAAE,CAAC,CACpB,CAAC,EACN,CAAC,EACH,CAAC,cACNxL,IAAA,UACEoN,IAAI,CAAC,MAAM,CACXpM,SAAS,CAAC,cAAc,CACxBwM,WAAW,CAAC,uCAAuC,CACnDpD,KAAK,CAAEzH,aAAc,CACrB5B,QAAQ,CAAGS,CAAC,EAAKoB,gBAAgB,CAACpB,CAAC,CAAC2I,MAAM,CAACC,KAAK,CAAE,CACnD,CAAC,cACFpK,IAAA,QAAKgB,SAAS,CAAC,aAAa,CAACyI,GAAG,CAAE5E,aAAc,CAAA5D,QAAA,CAC7CyG,eAAe,CAACnB,MAAM,GAAK,CAAC,cAC3BvG,IAAA,MAAGgB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,wCAAsC,CAAG,CAAC,CAEnEyG,eAAe,CAACxG,GAAG,CAAEuM,MAAM,OAAAC,iBAAA,CAAAC,mBAAA,oBACzBzN,KAAA,CAACb,MAAM,CAACuO,GAAG,EAET5M,SAAS,CAAC,aAAa,CACvB6M,UAAU,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAC,CAAEC,KAAK,CAAE,IAAK,CAAE,CACnCzM,OAAO,CAAEA,CAAA,GAAMyF,YAAY,CAAC0G,MAAM,CAACtH,GAAG,CAAE,CAAAlF,QAAA,eAExCjB,IAAA,QACEgB,SAAS,CAAC,eAAe,CACzB6K,KAAK,CAAE,CACLmC,eAAe,CAAE,OAAOP,MAAM,CAACQ,iBAAiB,EAAI,iBAAiB,GACvE,CAAE,CAAAhN,QAAA,cAEFjB,IAAA,SAAMgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEwM,MAAM,CAACxK,IAAI,CAACyI,MAAM,CAAC,CAAC,CAAC,CAAO,CAAC,CACnE,CAAC,cACNxL,KAAA,QAAKc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjB,IAAA,OAAIgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEwM,MAAM,CAACxK,IAAI,CAAK,CAAC,cAC9CjD,IAAA,MAAGgB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEwM,MAAM,CAAC1F,IAAI,CAAI,CAAC,CAC3CtF,eAAe,CAACgL,MAAM,CAACtH,GAAG,CAAC,eAC1BjG,KAAA,CAACb,MAAM,CAACuO,GAAG,EAAC5B,OAAO,CAAE,CAAEI,OAAO,CAAE,CAAC,CAAE8B,MAAM,CAAE,CAAE,CAAE,CAAC5B,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAE8B,MAAM,CAAE,MAAO,CAAE,CAAClN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eACjHf,KAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5Bf,KAAA,SAAMc,SAAS,CAAC,OAAO,CAAAC,QAAA,EAAEwM,MAAM,CAACU,eAAe,CAAC,UAAQ,EAAM,CAAC,cAC/DnO,IAAA,SAAMgB,SAAS,CAAC,OAAO,CAAAC,QAAA,EAAAyM,iBAAA,CAAED,MAAM,CAACW,SAAS,UAAAV,iBAAA,iBAAhBA,iBAAA,CAAkBW,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC,EAC1D,CAAC,cACNnO,KAAA,MAAGc,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAACjB,IAAA,WAAAiB,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,EAAA0M,mBAAA,CAACF,MAAM,CAACzF,WAAW,UAAA2F,mBAAA,iBAAlBA,mBAAA,CAAoBU,IAAI,CAAC,IAAI,CAAC,EAAI,CAAC,EAC1F,CACb,cACDnO,KAAA,WACEc,SAAS,CAAC,UAAU,CACpBM,OAAO,CAAGE,CAAC,EAAK,CACdA,CAAC,CAAC8M,eAAe,CAAC,CAAC,CACnB5K,eAAe,CAAC+J,MAAM,CAACtH,GAAG,CAAC,CAC3BvC,iBAAiB,CAAC6J,MAAM,CAACxK,IAAI,CAAC,CAChC,CAAE,CAAAhC,QAAA,eAEFjB,IAAA,CAACnB,aAAa,EAAC2M,IAAI,CAAE,EAAG,CAACK,KAAK,CAAE,CAAEC,WAAW,CAAE,CAAE,CAAE,CAAE,CAAC,mBAExD,EAAQ,CAAC,EACN,CAAC,GApCD2B,MAAM,CAACtH,GAqCF,CAAC,EACd,CACF,CACE,CAAC,EACC,CAAC,cAGVnG,IAAA,CAACZ,eAAe,EAAA6B,QAAA,CACbwC,YAAY,eACXzD,IAAA,CAACH,UAAU,EAACmF,MAAM,CAAEnD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsE,GAAI,CAAC+D,QAAQ,CAAEzG,YAAa,CAAC8K,QAAQ,CAAE5K,cAAe,CAAC6K,OAAO,CAAEA,CAAA,GAAM9K,eAAe,CAAC,IAAI,CAAE,CAAE,CACzH,CACc,CAAC,cAGlBxD,KAAA,YAAS8G,EAAE,CAAC,SAAS,CAAChG,SAAS,CAAC,kBAAkB,CAACK,QAAQ,CAAE,CAAC,CAAE,CAAC,aAAW,aAAa,CAAC,WAAS,SAAS,CAAAJ,QAAA,eAC1Gf,KAAA,QAAKc,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjB,IAAA,OAAIgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cAChDf,KAAA,QAAKc,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCjB,IAAA,WAAQ,aAAW,sBAAsB,CAACsB,OAAO,CAAEA,CAAA,GAAMkI,UAAU,CAAC1E,cAAc,CAAE,MAAM,CAAE,CAAC9D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACzHjB,IAAA,CAACjB,WAAW,EAACyM,IAAI,CAAE,EAAG,CAAE,CAAC,CACnB,CAAC,cACTxL,IAAA,WAAQ,aAAW,uBAAuB,CAACsB,OAAO,CAAEA,CAAA,GAAMkI,UAAU,CAAC1E,cAAc,CAAE,OAAO,CAAE,CAAC9D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cAC3HjB,IAAA,CAAChB,YAAY,EAACwM,IAAI,CAAE,EAAG,CAAE,CAAC,CACpB,CAAC,EACN,CAAC,EACH,CAAC,cACNxL,IAAA,UACEoN,IAAI,CAAC,MAAM,CACXpM,SAAS,CAAC,cAAc,CACxBwM,WAAW,CAAC,oBAAoB,CAChCpD,KAAK,CAAEvH,cAAe,CACtB9B,QAAQ,CAAGS,CAAC,EAAKsB,iBAAiB,CAACtB,CAAC,CAAC2I,MAAM,CAACC,KAAK,CAAE,CACpD,CAAC,cACFpK,IAAA,QAAKgB,SAAS,CAAC,cAAc,CAACyI,GAAG,CAAE3E,cAAe,CAAA7D,QAAA,CAC/CkH,gBAAgB,CAAC5B,MAAM,GAAK,CAAC,cAC5BrG,KAAA,MAAGc,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,oBACL,CAAC,GAAG,cACtBjB,IAAA,MACEyO,IAAI,CAAC,YAAY,CACjBnN,OAAO,CAAGE,CAAC,EAAK,CACdA,CAAC,CAACoH,cAAc,CAAC,CAAC,CAClBO,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC,CAACC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAC7E,CAAE,CAAArI,QAAA,CACH,2BAED,CAAG,CAAC,EACH,CAAC,CAEJkH,gBAAgB,CAACjH,GAAG,CAAEkH,CAAC,OAAAsG,aAAA,CAAAC,gBAAA,CAAAC,YAAA,oBACrB1O,KAAA,CAACb,MAAM,CAACuO,GAAG,EAAa5M,SAAS,CAAC,cAAc,CAAC6M,UAAU,CAAE,CAAEE,KAAK,CAAE,IAAK,CAAE,CAAA9M,QAAA,eAC3Ef,KAAA,QAAKc,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjB,IAAA,SAAMgB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,cACxCf,KAAA,QAAAe,QAAA,eACEjB,IAAA,OAAIgB,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAAyN,aAAA,CAAEtG,CAAC,CAACK,SAAS,UAAAiG,aAAA,iBAAXA,aAAA,CAAazL,IAAI,CAAK,CAAC,cACtD/C,KAAA,MAAGc,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAE,GAAI,CAAAyF,IAAI,CAAC0B,CAAC,CAAC/D,SAAS,CAAC,CAACqE,kBAAkB,CAAC,CAAC,CAAC,MAAI,CAACN,CAAC,CAAC9D,SAAS,EAAI,CAAC,EAC1F,CAAC,EACH,CAAC,cACNpE,KAAA,QAAKc,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9Bf,KAAA,MAAGc,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAACjB,IAAA,WAAAiB,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,EAAA0N,gBAAA,EAAAC,YAAA,CAACxG,CAAC,CAACI,QAAQ,UAAAoG,YAAA,iBAAVA,YAAA,CAAY3L,IAAI,UAAA0L,gBAAA,UAAAA,gBAAA,CAAI,KAAK,EAAI,CAAC,cACtFzO,KAAA,MAAGc,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAACjB,IAAA,WAAAiB,QAAA,CAAQ,WAAS,CAAQ,CAAC,iBAAI,CAACmH,CAAC,CAAC7D,QAAQ,EAAI,CAAC,cAC9EvE,IAAA,SAAMgB,SAAS,CAAEkG,cAAc,CAACkB,CAAC,CAACjB,MAAM,CAAE,CAAAlG,QAAA,CAAEmH,CAAC,CAACjB,MAAM,CAAO,CAAC,EACzD,CAAC,GAZSiB,CAAC,CAACjC,GAaP,CAAC,EACd,CACF,CACE,CAAC,EACC,CAAC,cAGVjG,KAAA,YAAS8G,EAAE,CAAC,QAAQ,CAAChG,SAAS,CAAC,gBAAgB,CAACK,QAAQ,CAAE,CAAC,CAAE,CAAC,aAAW,eAAe,CAAC,WAAS,SAAS,CAAAJ,QAAA,eACzGjB,IAAA,OAAIgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,CACnDkC,aAAa,eACZnD,IAAA,MAAGgB,SAAS,CAAEmC,aAAa,CAAC2E,QAAQ,CAAC,WAAW,CAAC,CAAG,iBAAiB,CAAG,eAAgB,CAAC1G,IAAI,CAAC,OAAO,CAAAH,QAAA,CAClGkC,aAAa,CACb,CACJ,cACDjD,KAAA,SAAM0M,QAAQ,CAAEjE,kBAAmB,CAAC3H,SAAS,CAAC,aAAa,CAAAC,QAAA,eACzDf,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,eAAe,CAAA7L,QAAA,CAAC,WAAS,CAAO,CAAC,cAChDjB,IAAA,UAAOgH,EAAE,CAAC,eAAe,CAACoG,IAAI,CAAC,MAAM,CAAChD,KAAK,CAAE,CAAAvI,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoB,IAAI,GAAI,EAAG,CAAC+J,QAAQ,MAAChM,SAAS,CAAC,YAAY,CAAE,CAAC,EAC9F,CAAC,cACNd,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAAiB,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BjB,IAAA,CAACY,UAAU,EAACE,MAAM,CAAEiC,MAAM,CAACjC,MAAO,CAACC,QAAQ,CAAG8N,CAAC,EAAK7L,SAAS,CAAEiE,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAEnG,MAAM,CAAE+N,CAAE,CAAC,CAAC,CAAE,CAAE,CAAC,EAClG,CAAC,cACN3O,KAAA,QAAKc,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjB,IAAA,UAAO8M,OAAO,CAAC,gBAAgB,CAAA7L,QAAA,CAAC,aAAW,CAAO,CAAC,cACnDjB,IAAA,aACEgH,EAAE,CAAC,gBAAgB,CACnBwG,WAAW,CAAC,0CAA0C,CACtDpD,KAAK,CAAErH,MAAM,CAACG,OAAQ,CACtBnC,QAAQ,CAAGS,CAAC,EAAKwB,SAAS,CAAEiE,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE/D,OAAO,CAAE1B,CAAC,CAAC2I,MAAM,CAACC,KAAM,CAAC,CAAC,CAAE,CAC7EpJ,SAAS,CAAC,eAAe,CACzB+L,QAAQ,MACT,CAAC,EACC,CAAC,cACN/M,IAAA,WAAQoN,IAAI,CAAC,QAAQ,CAACpM,SAAS,CAAC,YAAY,CAACgM,QAAQ,CAAE3J,aAAc,CAAApC,QAAA,CAClEoC,aAAa,CAAG,eAAe,CAAG,eAAe,CAC5C,CAAC,EACL,CAAC,EACA,CAAC,cAGVrD,IAAA,WACE,aAAW,gBAAgB,CAC3BgB,SAAS,CAAC,gBAAgB,CAC1BM,OAAO,CAAEA,CAAA,GAAMkC,cAAc,CAAE0E,CAAC,EAAK,CAACA,CAAC,CAAE,CAAAjH,QAAA,CAExCsC,WAAW,cACVvD,IAAA,SAAM6L,KAAK,CAAE,CAAEiD,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,CAAA9N,QAAA,CAAC,MAAC,CAAM,CAAC,cAEvDjB,IAAA,QAAKoL,GAAG,CAAC,kBAAkB,CAACC,GAAG,CAAC,cAAc,CAACQ,KAAK,CAAE,CAAEmD,YAAY,CAAE,KAAK,CAAEC,KAAK,CAAE,EAAE,CAAEf,MAAM,CAAE,EAAG,CAAE,CAAE,CACxG,CACK,CAAC,CACR3K,WAAW,eACVvD,IAAA,QAAKgB,SAAS,CAAC,eAAe,CAACI,IAAI,CAAC,QAAQ,CAAC,aAAW,MAAM,CAAC,aAAW,gBAAgB,CAAAH,QAAA,cACxFjB,IAAA,WACEI,KAAK,CAAC,SAAS,CACfgL,GAAG,CAAC,8DAA8D,CAClES,KAAK,CAAE,CAAEoD,KAAK,CAAE,MAAM,CAAEf,MAAM,CAAE,MAAM,CAAEgB,MAAM,CAAE,MAAM,CAAEF,YAAY,CAAE,EAAG,CAAE,CAC3EG,KAAK,CAAC,iBAAiB,CACxB,CAAC,CACC,CACN,EACG,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}