{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useNavigate}from'react-router-dom';import{Home,CalendarCheck2,Users,MessageCircle,IndianRupee,Phone,ShieldCheck,Timer,XCircle,Star,ArrowRight,Clock3,LogOut,UserCircle2,MapPin,Lamp,Calendar,Clock,Gift,Zap,TrendingUp,TrendingDown,Bell,Wallet,Percent}from\"lucide-react\";import{motion,AnimatePresence}from'framer-motion';import'./PanditDashboard.css';// ChatWindow Modal - Extracted for clarity and potential reusability\nimport{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatWindow=_ref=>{let{userId,panditId,chatName,onClose}=_ref;useEffect(()=>{const handleEscape=event=>{if(event.key==='Escape'){onClose();}};document.addEventListener('keydown',handleEscape);return()=>{document.removeEventListener('keydown',handleEscape);};},[onClose]);return/*#__PURE__*/_jsx(motion.div,{className:\"chat-window-modal\",role:\"dialog\",\"aria-modal\":\"true\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsxs(motion.div,{className:\"chat-window-content-wrapper\",initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:'spring',stiffness:120,damping:20},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Chat with \",chatName]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,\"aria-label\":\"Close chat window\",type:\"button\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-window-content\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"chat-feature-note\",children:[\"[Chat for panditId: \",panditId,\"] - Feature Coming Soon\"]})})]})});};// Welcome Section Component\nconst WelcomeSection=_ref2=>{let{userName}=_ref2;const getGreeting=()=>{const hour=new Date().getHours();if(hour<12)return'Good Morning';if(hour<18)return'Good Afternoon';return'Good Evening';};return/*#__PURE__*/_jsxs(motion.div,{className:\"welcome-section\",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.2},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[getGreeting(),\", \",/*#__PURE__*/_jsx(\"span\",{className:\"highlight-name\",children:userName||'Pandit Ji'}),\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Your devotion strengthens the path. Here's a quick overview of your activities.\"})]});};// DashboardHeader Component (Improved)\nconst DashboardHeader=_ref3=>{let{userName,userEmail}=_ref3;const[currentDateTime,setCurrentDateTime]=useState(new Date());useEffect(()=>{const timer=setInterval(()=>{setCurrentDateTime(new Date());},1000);// Update every second\nreturn()=>clearInterval(timer);},[]);const formattedDate=currentDateTime.toLocaleDateString('en-IN',{weekday:'long',year:'numeric',month:'long',day:'numeric'});const formattedTime=currentDateTime.toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:true});return/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-main-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-user-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"user-greeting\",children:[\"Namaste, \",/*#__PURE__*/_jsx(\"span\",{className:\"user-name-header\",children:userName||'Pandit Ji'}),\"!\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"user-email-header\",children:userEmail||'pandit@example.com'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-datetime-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"current-date\",children:[/*#__PURE__*/_jsx(Calendar,{size:18,style:{marginRight:5,verticalAlign:'middle'}}),\" \",formattedDate]}),/*#__PURE__*/_jsxs(\"span\",{className:\"current-time\",children:[/*#__PURE__*/_jsx(Clock,{size:18,style:{marginRight:5,verticalAlign:'middle'}}),\" \",formattedTime]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-action-items\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"icon-button\",\"aria-label\":\"Notifications\",children:/*#__PURE__*/_jsx(Bell,{size:22})}),/*#__PURE__*/_jsx(\"button\",{className:\"icon-button\",\"aria-label\":\"Settings\",children:/*#__PURE__*/_jsx(UserCircle2,{size:22})})]})]});};const pages={dashboard:\"Dashboard\",bookings:\"Bookings\",devotees:\"Devotees\",chat:\"Chats\"};function PanditDashboard(){const navigate=useNavigate();const user=useMemo(()=>JSON.parse(localStorage.getItem('user'))||{},[]);const{_id,name,email,is_verified,city,experienceYears,phone,languages,speciality,profile_photo_url}=user;const[bookings,setBookings]=useState([]);const[currentPage,setCurrentPage]=useState('dashboard');const[showStats,setShowStats]=useState(false);const[filterDate,setFilterDate]=useState('');const[searchName,setSearchName]=useState('');const[filterStatus,setFilterStatus]=useState('');const[activeChatDevoteeId,setActiveChatDevoteeId]=useState(null);const[activeChatDevoteeName,setActiveChatDevoteeName]=useState('');const[filterResetTrigger,setFilterResetTrigger]=useState(0);const[loadingBookings,setLoadingBookings]=useState(true);const[loadingDevotees,setLoadingDevotees]=useState(true);useEffect(()=>{const fetchBookings=async()=>{if(_id){setLoadingBookings(true);try{const res=await fetch(`http://localhost:5000/api/bookings/view?panditid=${_id}`);const data=await res.json();setBookings(data);}catch(error){console.error('Failed to fetch bookings:',error);setBookings([]);}finally{setLoadingBookings(false);}}else{setBookings([]);setLoadingBookings(false);}};fetchBookings();},[_id]);const completedCount=useMemo(()=>bookings.filter(b=>b.status==='Accepted').length,[bookings]);const pendingCount=useMemo(()=>bookings.filter(b=>b.status==='Pending').length,[bookings]);const rejectedCount=useMemo(()=>bookings.filter(b=>b.status==='Rejected').length,[bookings]);const totalBookingsCount=bookings.length;const uniqueDevoteesCount=useMemo(()=>{const ids=new Set();bookings.forEach(b=>{var _b$userid;return((_b$userid=b.userid)===null||_b$userid===void 0?void 0:_b$userid._id)&&ids.add(b.userid._id);});return ids.size;},[bookings]);const totalEarnings=completedCount*500;// Assuming 500 per completed puja\nconst filteredBookings=useMemo(()=>{return bookings.filter(b=>{var _b$userid2,_b$userid2$name;const dateMatch=filterDate?b.puja_date===filterDate:true;const nameMatch=(_b$userid2=b.userid)===null||_b$userid2===void 0?void 0:(_b$userid2$name=_b$userid2.name)===null||_b$userid2$name===void 0?void 0:_b$userid2$name.toLowerCase().includes(searchName.toLowerCase());const statusMatch=filterStatus?b.status===filterStatus:true;return dateMatch&&nameMatch&&statusMatch;}).sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));// Sort by most recent\n},[bookings,filterDate,searchName,filterStatus,filterResetTrigger]);const devoteesList=useMemo(()=>{setLoadingDevotees(true);const map={};bookings.forEach(b=>{var _b$userid3;if((_b$userid3=b.userid)!==null&&_b$userid3!==void 0&&_b$userid3._id&&!map[b.userid._id]){map[b.userid._id]={id:b.userid._id,name:b.userid.name,phone:b.userid.phone,city:b.location};}});setLoadingDevotees(false);return Object.values(map);},[bookings]);const updateStatus=async(id,status)=>{try{const res=await fetch(`http://localhost:5000/api/bookings/status/${id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({status})});const data=await res.json();if(data.booking){setBookings(prev=>prev.map(b=>b._id===id?data.booking:b));}}catch(err){console.error('Failed to update status',err);// TODO: Add user-facing error notification\n}};const handleLogout=()=>{localStorage.clear();navigate('/');};const statusIcon={Pending:/*#__PURE__*/_jsx(Timer,{size:18,color:\"#e5ae28\"}),Accepted:/*#__PURE__*/_jsx(ShieldCheck,{size:18,color:\"#23cb7d\"}),Rejected:/*#__PURE__*/_jsx(XCircle,{size:18,color:\"#e15d7c\"})};const sidebarItems=[{key:'dashboard',label:'Dashboard',icon:/*#__PURE__*/_jsx(Home,{size:24})},{key:'bookings',label:'Bookings',icon:/*#__PURE__*/_jsx(CalendarCheck2,{size:24})},{key:'devotees',label:'Devotees',icon:/*#__PURE__*/_jsx(Users,{size:24})},{key:'chat',label:'Chats',icon:/*#__PURE__*/_jsx(MessageCircle,{size:24})}];const topServices=useMemo(()=>{const stats={};bookings.forEach(b=>{var _b$serviceid;const svc=(_b$serviceid=b.serviceid)===null||_b$serviceid===void 0?void 0:_b$serviceid.name;if(svc)stats[svc]=(stats[svc]||0)+1;});return Object.entries(stats).sort((a,b)=>b[1]-a[1]).slice(0,3);},[bookings]);const upcoming=useMemo(()=>{return bookings.filter(b=>new Date(b.puja_date)>=new Date(Date.now()-24*60*60*1000)&&b.status===\"Accepted\").sort((a,b)=>new Date(a.puja_date)-new Date(b.puja_date)).slice(0,5);},[bookings]);const recentBookings=useMemo(()=>{return bookings.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt)).slice(0,5);},[bookings]);const clearFilters=()=>{setFilterDate('');setSearchName('');setFilterStatus('');setFilterResetTrigger(t=>t+1);};const performanceMetrics=useMemo(()=>{const acceptRate=totalBookingsCount>0?(completedCount/totalBookingsCount*100).toFixed(1):0;const avgResponseTime=\"2.5 hrs\";return{acceptRate,avgResponseTime};},[completedCount,totalBookingsCount]);const panditTips=[\"Ensure prompt responses to pending bookings to improve your acceptance rate.\",\"Keep your profile updated with your latest services and availability.\",\"Engage with devotees via chat for better coordination and service.\",\"Collect feedback from devotees to enhance your reputation.\"];return/*#__PURE__*/_jsx(\"div\",{className:\"pdash-bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-main-layout\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"pandit-sidebar\",\"aria-label\":\"Pandit dashboard navigation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-profile-sidebar\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/subh.png\"// Ensure this path is correct\n,alt:\"App Logo\",className:\"pandit-logo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-verification-status\",tabIndex:-1,children:/*#__PURE__*/_jsx(\"small\",{className:is_verified?\"text-verified\":\"text-pending\",children:is_verified?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ShieldCheck,{size:14}),\" Verified\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Timer,{size:14}),\" Not Verified\"]})})})]}),/*#__PURE__*/_jsx(\"nav\",{role:\"navigation\",\"aria-label\":\"Main dashboard pages\",children:sidebarItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:`sidebar-navitem${currentPage===item.key?' active':''}`,onClick:()=>setCurrentPage(item.key),tabIndex:0,role:\"button\",\"aria-current\":currentPage===item.key?\"page\":undefined,\"aria-label\":item.label,onKeyDown:e=>{if(e.key==='Enter'||e.key===' ')setCurrentPage(item.key);},children:[item.icon,/*#__PURE__*/_jsx(\"span\",{className:\"sidebar-item-label\",children:item.label})]},item.key))}),/*#__PURE__*/_jsxs(\"button\",{className:\"logout-btn sidebar-logout-btn\",onClick:handleLogout,\"aria-label\":\"Logout from dashboard\",type:\"button\",children:[/*#__PURE__*/_jsx(LogOut,{size:22}),\" Logout\"]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"pandit-content\",\"aria-hidden\":activeChatDevoteeId?true:false,children:[/*#__PURE__*/_jsx(DashboardHeader,{userName:name,userEmail:email}),/*#__PURE__*/_jsx(\"header\",{className:\"pandit-header-row2\",\"aria-live\":\"polite\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"pandit-heading\",children:pages[currentPage]})}),currentPage==='dashboard'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(WelcomeSection,{userName:name}),/*#__PURE__*/_jsxs(motion.div,{className:\"pandit-profile-card animate-in\",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-profile-pic\",\"aria-label\":\"Pandit profile picture and status\",children:[profile_photo_url?/*#__PURE__*/_jsx(\"img\",{src:profile_photo_url,alt:`${name}'s profile`,className:\"pandit-avatar-img\"}):/*#__PURE__*/_jsx(UserCircle2,{color:\"#ffecb3\",size:108,className:\"pandit-avatar\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:is_verified?'pdash-badge verified':'pdash-badge notverified',\"aria-live\":\"polite\",\"aria-atomic\":\"true\",children:is_verified?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ShieldCheck,{size:18}),\" Verified\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Timer,{size:18}),\" Not Verified\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-profile-info\",children:[/*#__PURE__*/_jsx(\"h2\",{tabIndex:-1,children:name||'Pandit Ji'}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"City:\"}),\" \",city||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Experience:\"}),\" \",experienceYears||'--',\" years\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-profile-row\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Phone,{style:{marginRight:4},size:18}),\" \",phone||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(MessageCircle,{size:18,style:{marginBottom:-3}})}),\" \",languages&&languages.join(', ')||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Star,{style:{marginBottom:-3},size:18}),\" \",speciality||'Puja & Rituals']})]}),/*#__PURE__*/_jsx(\"button\",{className:\"stats-toggle-btn\",onClick:()=>setShowStats(s=>!s),\"aria-expanded\":showStats,\"aria-controls\":\"stats-section\",type:\"button\",children:showStats?'Hide Stats ▲':'Show Stats ▼'}),/*#__PURE__*/_jsx(motion.div,{id:\"stats-section\",style:{overflow:'hidden'},initial:{height:0,opacity:0},animate:{height:showStats?'auto':0,opacity:showStats?1:0},transition:{duration:0.3},\"aria-live\":\"polite\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stats-box\",style:{gap:26},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-item\",\"aria-label\":`Accepted bookings: ${completedCount}`,children:[/*#__PURE__*/_jsx(ShieldCheck,{size:26,color:\"#4CAF50\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stats-num\",children:completedCount}),/*#__PURE__*/_jsx(\"span\",{children:\"Accepted\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-item\",\"aria-label\":`Pending bookings: ${pendingCount}`,children:[/*#__PURE__*/_jsx(Timer,{size:26,color:\"#ffb300\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stats-num\",children:pendingCount}),/*#__PURE__*/_jsx(\"span\",{children:\"Pending\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-item\",\"aria-label\":`Rejected bookings: ${rejectedCount}`,children:[/*#__PURE__*/_jsx(XCircle,{size:26,color:\"#e74c3c\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stats-num\",children:rejectedCount}),/*#__PURE__*/_jsx(\"span\",{children:\"Rejected\"})]})]})})]})]}),/*#__PURE__*/_jsxs(motion.div,{className:\"pandit-dashboard-cards\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dash-card gradientblue\",\"aria-label\":`Devotees: ${uniqueDevoteesCount}`,children:[/*#__PURE__*/_jsx(Users,{size:32,color:\"#cc5500\",className:\"dash-card-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-label\",children:\"Devotees\"}),/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-value\",children:uniqueDevoteesCount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dash-card gradientmint\",\"aria-label\":`Bookings: ${bookings.length}`,children:[/*#__PURE__*/_jsx(CalendarCheck2,{size:32,color:\"#4CAF50\",className:\"dash-card-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-label\",children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-value\",children:bookings.length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dash-card gradientyellow\",\"aria-label\":`Chats: ${uniqueDevoteesCount}`,children:[/*#__PURE__*/_jsx(MessageCircle,{size:32,color:\"#ff9800\",className:\"dash-card-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-label\",children:\"Active Chats\"}),/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-value\",children:uniqueDevoteesCount}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dash-card gradientpink\",\"aria-label\":`Earnings: ₹${totalEarnings}`,children:[/*#__PURE__*/_jsx(IndianRupee,{size:32,color:\"#e65100\",className:\"dash-card-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"dash-card-label\",children:\"Total Earnings\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"dash-card-value\",children:[\"\\u20B9\",totalEarnings]})]})]})]}),/*#__PURE__*/_jsxs(motion.div,{className:\"widget performance-metrics\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.3},tabIndex:-1,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Zap,{size:22,\"aria-hidden\":\"true\",style:{marginRight:6}}),\" Your Performance Insights\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metrics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metric-label\",children:\"Acceptance Rate\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"metric-value\",style:{color:performanceMetrics.acceptRate>=80?'#4CAF50':'#ffb300'},children:[performanceMetrics.acceptRate,\"% \",performanceMetrics.acceptRate>=80?/*#__PURE__*/_jsx(TrendingUp,{size:18}):/*#__PURE__*/_jsx(TrendingDown,{size:18,color:\"#e74c3c\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metric-label\",children:\"Avg. Response Time\"}),/*#__PURE__*/_jsx(\"span\",{className:\"metric-value\",children:performanceMetrics.avgResponseTime})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metric-label\",children:\"Total Pujas\"}),/*#__PURE__*/_jsx(\"span\",{className:\"metric-value\",children:completedCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metric-label\",children:\"Devotee Rating\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"metric-value\",children:[\"4.8 \",/*#__PURE__*/_jsx(Star,{size:18,color:\"#FFD700\",style:{verticalAlign:'middle'}})]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-widgets\",role:\"region\",\"aria-label\":\"Dashboard extra widgets\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"widget upcoming-pujas\",tabIndex:-1,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Clock3,{size:22,\"aria-hidden\":\"true\",style:{marginRight:6}}),\" Upcoming Pujas\"]}),loadingBookings?/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading upcoming pujas...\"}):upcoming.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-state-message\",children:\"No upcoming pujas.\"}):/*#__PURE__*/_jsx(\"ul\",{children:upcoming.map(b=>{var _b$pujaId;const daysDiff=Math.ceil((new Date(b.puja_date)-new Date())/(1000*60*60*24));let tag='';let tagColor='';if(daysDiff<1){tag='Today';tagColor='#e65100';}// Darker saffron for today\nelse if(daysDiff===1){tag='Tomorrow';tagColor='#ffb300';}// Lighter saffron\nelse{tag=`In ${daysDiff} days`;tagColor='#944b00';}// A spiritual brown\nreturn/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ArrowRight,{size:14,\"aria-hidden\":\"true\"}),\" \",((_b$pujaId=b.pujaId)===null||_b$pujaId===void 0?void 0:_b$pujaId.name)||\"Puja\",\" \\u2013 \",new Date(b.puja_date).toLocaleDateString('en-IN')]}),/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:tagColor},className:\"date-tag\",\"aria-label\":`Date tag: ${tag}`,children:tag})]},b._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"widget recent-activity\",tabIndex:-1,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Clock,{size:22,\"aria-hidden\":\"true\",style:{marginRight:6}}),\" Recent Activity\"]}),loadingBookings?/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading recent activity...\"}):recentBookings.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-state-message\",children:\"No recent bookings.\"}):/*#__PURE__*/_jsx(\"ul\",{children:recentBookings.map(b=>{var _b$userid4,_b$pujaId2;return/*#__PURE__*/_jsxs(\"li\",{className:`activity-item ${b.status.toLowerCase()}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"activity-status-dot\",style:{backgroundColor:b.status==='Accepted'?'#4CAF50':b.status==='Pending'?'#ffb300':'#e74c3c'}}),/*#__PURE__*/_jsxs(\"span\",{children:[((_b$userid4=b.userid)===null||_b$userid4===void 0?void 0:_b$userid4.name)||'Devotee',\" - \",((_b$pujaId2=b.pujaId)===null||_b$pujaId2===void 0?void 0:_b$pujaId2.name)||'Puja',\" (\",/*#__PURE__*/_jsx(\"strong\",{className:\"status-text\",children:b.status}),\")\"]}),/*#__PURE__*/_jsx(\"small\",{children:new Date(b.createdAt).toLocaleDateString('en-IN')})]},b._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"widget top-services\",tabIndex:-1,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Star,{size:22,\"aria-hidden\":\"true\",style:{marginRight:6}}),\" Top Services\"]}),loadingBookings?/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading top services...\"}):topServices.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-state-message\",children:\"No services data available.\"}):/*#__PURE__*/_jsx(\"ul\",{children:topServices.map(_ref4=>{let[svc,count]=_ref4;return/*#__PURE__*/_jsxs(\"li\",{children:[svc,\": \",/*#__PURE__*/_jsxs(\"strong\",{children:[count,\" bookings\"]})]},svc);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"widget pandit-tips\",tabIndex:-1,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Lamp,{size:22,\"aria-hidden\":\"true\",style:{marginRight:6}}),\" Pandit Tips\"]}),/*#__PURE__*/_jsx(\"ul\",{children:panditTips.map((tip,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(ArrowRight,{size:14,\"aria-hidden\":\"true\"}),\" \",tip]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"offer-banner\",tabIndex:-1,\"aria-live\":\"polite\",children:[/*#__PURE__*/_jsx(Gift,{size:22,style:{marginRight:8,color:'white'},\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{role:\"alert\",\"aria-atomic\":\"true\",children:\"This Shravan: 25% Off on Rudrabhishek Pujas! Book Now \"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>alert('Offer details coming soon!'),children:\"See Details\"})]})]})]}),currentPage==='bookings'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(motion.div,{className:\"pandit-filters animate-in\",initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{duration:0.45},children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filterDate,className:\"pandit-input\",onChange:e=>setFilterDate(e.target.value),\"aria-label\":\"Filter bookings by date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by devotee name\",value:searchName,onChange:e=>setSearchName(e.target.value),className:\"pandit-input\",\"aria-label\":\"Search bookings by devotee name\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),className:\"pandit-select\",\"aria-label\":\"Filter bookings by status\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accepted\",children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rejected\",children:\"Rejected\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"clear-filters-btn\",onClick:clearFilters,\"aria-label\":\"Clear all filters\",type:\"button\",children:\"Clear Filters\"})]}),loadingBookings?/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading bookings...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"pandit-count\",\"aria-live\":\"polite\",\"aria-atomic\":\"true\",children:[\"Showing \",filteredBookings.length,\" booking\",filteredBookings.length!==1?'s':'']}),/*#__PURE__*/_jsx(\"div\",{className:\"pandit-bookings-grid\",role:\"list\",\"aria-label\":\"Filtered bookings list\",children:/*#__PURE__*/_jsx(AnimatePresence,{children:filteredBookings.length?filteredBookings.map((b,i)=>{var _b$userid5,_b$userid6,_b$serviceid2,_b$pujaId3,_b$userid9,_b$userid0,_b$userid1,_b$userid10;return/*#__PURE__*/_jsxs(motion.div,{className:`pandit-booking-card ${b.status.toLowerCase()}`,role:\"listitem\",initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:12},transition:{delay:0.07*i},tabIndex:0,\"aria-describedby\":`booking-desc-${b._id}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-booking-head\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-devotee\",children:((_b$userid5=b.userid)===null||_b$userid5===void 0?void 0:_b$userid5.name)||'N/A'}),/*#__PURE__*/_jsxs(\"span\",{className:`pandit-status ${b.status.toLowerCase()}`,children:[statusIcon[b.status],\" \",b.status]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-booking-row\",id:`booking-desc-${b._id}`,children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Phone,{size:16,\"aria-hidden\":\"true\"}),\" \",((_b$userid6=b.userid)===null||_b$userid6===void 0?void 0:_b$userid6.phone)||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Users,{size:16,\"aria-hidden\":\"true\"}),\" \",((_b$serviceid2=b.serviceid)===null||_b$serviceid2===void 0?void 0:_b$serviceid2.name)||'N/A']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-booking-row\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Lamp,{size:16,\"aria-hidden\":\"true\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Puja:\"}),\" \",((_b$pujaId3=b.pujaId)===null||_b$pujaId3===void 0?void 0:_b$pujaId3.name)||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Calendar,{size:16,\"aria-hidden\":\"true\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Date:\"}),\" \",new Date(b.puja_date).toLocaleDateString('en-IN')]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Clock,{size:16,\"aria-hidden\":\"true\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Time:\"}),\" \",b.puja_time]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pandit-booking-row\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(MapPin,{size:16,\"aria-hidden\":\"true\"}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Location:\"}),\" \",b.location||'N/A']})}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-from-booking-btn\",onClick:()=>{var _b$userid7,_b$userid8;setActiveChatDevoteeId((_b$userid7=b.userid)===null||_b$userid7===void 0?void 0:_b$userid7._id);setActiveChatDevoteeName(((_b$userid8=b.userid)===null||_b$userid8===void 0?void 0:_b$userid8.name)||'Devotee');},disabled:!((_b$userid9=b.userid)!==null&&_b$userid9!==void 0&&_b$userid9._id),\"aria-label\":`Chat with devotee ${((_b$userid0=b.userid)===null||_b$userid0===void 0?void 0:_b$userid0.name)||'Devotee'}`,type:\"button\",children:\"Chat with Devotee\"}),b.status==='Pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-buttons\",\"aria-label\":\"Action buttons for pending booking\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateStatus(b._id,'Accepted'),className:\"accept-btn\",\"aria-label\":`Accept booking for ${((_b$userid1=b.userid)===null||_b$userid1===void 0?void 0:_b$userid1.name)||'devotee'}`,type:\"button\",children:[/*#__PURE__*/_jsx(ShieldCheck,{size:16}),\" Accept\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateStatus(b._id,'Rejected'),className:\"reject-btn\",\"aria-label\":`Reject booking for ${((_b$userid10=b.userid)===null||_b$userid10===void 0?void 0:_b$userid10.name)||'devotee'}`,type:\"button\",children:[/*#__PURE__*/_jsx(XCircle,{size:16}),\" Reject\"]})]})]},b._id);}):/*#__PURE__*/_jsx(motion.div,{className:\"pandit-nobookings\",initial:{opacity:0},animate:{opacity:1},\"aria-live\":\"polite\",\"aria-atomic\":\"true\",tabIndex:-1,children:\"No bookings found matching your filters.\"},\"no-bookings\")})})]})]}),currentPage===\"devotees\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-devotee-list\",role:\"region\",\"aria-label\":\"List of devotees\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"devotee-list-title\",tabIndex:-1,children:[/*#__PURE__*/_jsx(Users,{size:22,style:{marginRight:6},\"aria-hidden\":\"true\"}),\" My Devotees (\",devoteesList.length,\")\"]}),loadingDevotees?/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading devotees list...\"}):devoteesList.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-message\",tabIndex:-1,children:\"No devotees found yet.\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"devotees-table\",role:\"table\",\"aria-label\":\"Devotees table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"devotees-table-header\",role:\"rowgroup\",children:[/*#__PURE__*/_jsx(\"div\",{role:\"columnheader\",children:\"Name\"}),/*#__PURE__*/_jsx(\"div\",{role:\"columnheader\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"div\",{role:\"columnheader\",children:\"Location\"}),/*#__PURE__*/_jsx(\"div\",{role:\"columnheader\",children:\"Chat\"})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:devoteesList.map(dev=>/*#__PURE__*/_jsxs(motion.div,{className:\"devotees-table-row\",role:\"row\",tabIndex:0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},transition:{duration:0.3},children:[/*#__PURE__*/_jsx(\"div\",{role:\"cell\",children:dev.name}),/*#__PURE__*/_jsx(\"div\",{role:\"cell\",children:dev.phone}),/*#__PURE__*/_jsx(\"div\",{role:\"cell\",children:dev.city||'N/A'}),/*#__PURE__*/_jsx(\"div\",{role:\"cell\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"chat-devotee-btn\",onClick:()=>{setActiveChatDevoteeId(dev.id);setActiveChatDevoteeName(dev.name||\"Devotee\");},\"aria-label\":`Chat with devotee ${dev.name}`,type:\"button\",children:[/*#__PURE__*/_jsx(MessageCircle,{size:20,style:{marginRight:6},\"aria-hidden\":\"true\"}),\"Chat\"]})})]},dev.id))})]})]}),currentPage===\"chat\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"pandit-chat-guide\",tabIndex:0,\"aria-live\":\"polite\",\"aria-atomic\":\"true\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(MessageCircle,{size:28,style:{verticalAlign:'middle',marginRight:6},\"aria-hidden\":\"true\"}),\"Start Conversation\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"You can initiate a chat by clicking \\\"Chat with Devotee\\\" on any booking or devotee entry.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"All chat transcripts will appear here. **(Feature Coming Soon)**\"})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:activeChatDevoteeId&&/*#__PURE__*/_jsx(ChatWindow,{userId:_id,panditId:activeChatDevoteeId,chatName:activeChatDevoteeName,onClose:()=>setActiveChatDevoteeId(null)})})]})]})});}export default PanditDashboard;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useNavigate","Home","CalendarCheck2","Users","MessageCircle","IndianRupee","Phone","ShieldCheck","Timer","XCircle","Star","ArrowRight","Clock3","LogOut","UserCircle2","MapPin","Lamp","Calendar","Clock","Gift","Zap","TrendingUp","TrendingDown","Bell","Wallet","Percent","motion","AnimatePresence","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ChatWindow","_ref","userId","panditId","chatName","onClose","handleEscape","event","key","document","addEventListener","removeEventListener","div","className","role","initial","opacity","animate","exit","children","y","transition","type","stiffness","damping","onClick","WelcomeSection","_ref2","userName","getGreeting","hour","Date","getHours","duration","delay","DashboardHeader","_ref3","userEmail","currentDateTime","setCurrentDateTime","timer","setInterval","clearInterval","formattedDate","toLocaleDateString","weekday","year","month","day","formattedTime","toLocaleTimeString","minute","second","hour12","size","style","marginRight","verticalAlign","pages","dashboard","bookings","devotees","chat","PanditDashboard","navigate","user","JSON","parse","localStorage","getItem","_id","name","email","is_verified","city","experienceYears","phone","languages","speciality","profile_photo_url","setBookings","currentPage","setCurrentPage","showStats","setShowStats","filterDate","setFilterDate","searchName","setSearchName","filterStatus","setFilterStatus","activeChatDevoteeId","setActiveChatDevoteeId","activeChatDevoteeName","setActiveChatDevoteeName","filterResetTrigger","setFilterResetTrigger","loadingBookings","setLoadingBookings","loadingDevotees","setLoadingDevotees","fetchBookings","res","fetch","data","json","error","console","completedCount","filter","b","status","length","pendingCount","rejectedCount","totalBookingsCount","uniqueDevoteesCount","ids","Set","forEach","_b$userid","userid","add","totalEarnings","filteredBookings","_b$userid2","_b$userid2$name","dateMatch","puja_date","nameMatch","toLowerCase","includes","statusMatch","sort","a","createdAt","devoteesList","map","_b$userid3","id","location","Object","values","updateStatus","method","headers","body","stringify","booking","prev","err","handleLogout","clear","statusIcon","Pending","color","Accepted","Rejected","sidebarItems","label","icon","topServices","stats","_b$serviceid","svc","serviceid","entries","slice","upcoming","now","recentBookings","clearFilters","t","performanceMetrics","acceptRate","toFixed","avgResponseTime","panditTips","src","alt","tabIndex","item","undefined","onKeyDown","e","marginBottom","join","s","overflow","height","gap","_b$pujaId","daysDiff","Math","ceil","tag","tagColor","pujaId","backgroundColor","_b$userid4","_b$pujaId2","_ref4","count","tip","index","alert","value","onChange","target","placeholder","i","_b$userid5","_b$userid6","_b$serviceid2","_b$pujaId3","_b$userid9","_b$userid0","_b$userid1","_b$userid10","puja_time","_b$userid7","_b$userid8","disabled","dev"],"sources":["C:/Users/sv106/OneDrive/Desktop/Shubhkarya/Frontend/pandit-booking-frontend/src/pages/PanditDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Home, CalendarCheck2, Users, MessageCircle, IndianRupee, Phone, ShieldCheck,\r\n    Timer, XCircle, Star, ArrowRight, Clock3, LogOut, UserCircle2, MapPin, Lamp, Calendar, Clock, Gift,\r\n    Zap, TrendingUp, TrendingDown, Bell, Wallet, Percent\r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport './PanditDashboard.css';\r\n\r\n// ChatWindow Modal - Extracted for clarity and potential reusability\r\nconst ChatWindow = ({ userId, panditId, chatName, onClose }) => {\r\n    useEffect(() => {\r\n        const handleEscape = (event) => {\r\n            if (event.key === 'Escape') {\r\n                onClose();\r\n            }\r\n        };\r\n        document.addEventListener('keydown', handleEscape);\r\n        return () => {\r\n            document.removeEventListener('keydown', handleEscape);\r\n        };\r\n    }, [onClose]);\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"chat-window-modal\"\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n        >\r\n            <motion.div\r\n                className=\"chat-window-content-wrapper\"\r\n                initial={{ y: 50, opacity: 0 }}\r\n                animate={{ y: 0, opacity: 1 }}\r\n                exit={{ y: 50, opacity: 0 }}\r\n                transition={{ type: 'spring', stiffness: 120, damping: 20 }}\r\n            >\r\n                <div className=\"chat-window-header\">\r\n                    <span>Chat with {chatName}</span>\r\n                    <button onClick={onClose} aria-label=\"Close chat window\" type=\"button\">×</button>\r\n                </div>\r\n                <div className=\"chat-window-content\">\r\n                    <p className=\"chat-feature-note\">[Chat for panditId: {panditId}] - Feature Coming Soon</p>\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n// Welcome Section Component\r\nconst WelcomeSection = ({ userName }) => {\r\n    const getGreeting = () => {\r\n        const hour = new Date().getHours();\r\n        if (hour < 12) return 'Good Morning';\r\n        if (hour < 18) return 'Good Afternoon';\r\n        return 'Good Evening';\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"welcome-section\"\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.6, delay: 0.2 }}\r\n        >\r\n            <h2>{getGreeting()}, <span className=\"highlight-name\">{userName || 'Pandit Ji'}</span>!</h2>\r\n            <p>Your devotion strengthens the path. Here's a quick overview of your activities.</p>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n// DashboardHeader Component (Improved)\r\nconst DashboardHeader = ({ userName, userEmail }) => {\r\n    const [currentDateTime, setCurrentDateTime] = useState(new Date());\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            setCurrentDateTime(new Date());\r\n        }, 1000); // Update every second\r\n\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    const formattedDate = currentDateTime.toLocaleDateString('en-IN', {\r\n        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'\r\n    });\r\n    const formattedTime = currentDateTime.toLocaleTimeString('en-IN', {\r\n        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true\r\n    });\r\n\r\n    return (\r\n        <header className=\"dashboard-main-header\">\r\n            <div className=\"header-user-info\">\r\n                <span className=\"user-greeting\">Namaste, <span className=\"user-name-header\">{userName || 'Pandit Ji'}</span>!</span>\r\n                <span className=\"user-email-header\">{userEmail || 'pandit@example.com'}</span>\r\n            </div>\r\n            <div className=\"header-datetime-info\">\r\n                <span className=\"current-date\"><Calendar size={18} style={{ marginRight: 5, verticalAlign: 'middle' }} /> {formattedDate}</span>\r\n                <span className=\"current-time\"><Clock size={18} style={{ marginRight: 5, verticalAlign: 'middle' }} /> {formattedTime}</span>\r\n            </div>\r\n            <div className=\"header-action-items\">\r\n                <button className=\"icon-button\" aria-label=\"Notifications\"><Bell size={22} /></button>\r\n                <button className=\"icon-button\" aria-label=\"Settings\"><UserCircle2 size={22} /></button>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n\r\nconst pages = {\r\n    dashboard: \"Dashboard\",\r\n    bookings: \"Bookings\",\r\n    devotees: \"Devotees\",\r\n    chat: \"Chats\"\r\n};\r\n\r\nfunction PanditDashboard() {\r\n    const navigate = useNavigate();\r\n    const user = useMemo(() => JSON.parse(localStorage.getItem('user')) || {}, []);\r\n    const { _id, name, email, is_verified, city, experienceYears, phone, languages, speciality, profile_photo_url } = user;\r\n\r\n    const [bookings, setBookings] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState('dashboard');\r\n    const [showStats, setShowStats] = useState(false);\r\n    const [filterDate, setFilterDate] = useState('');\r\n    const [searchName, setSearchName] = useState('');\r\n    const [filterStatus, setFilterStatus] = useState('');\r\n    const [activeChatDevoteeId, setActiveChatDevoteeId] = useState(null);\r\n    const [activeChatDevoteeName, setActiveChatDevoteeName] = useState('');\r\n    const [filterResetTrigger, setFilterResetTrigger] = useState(0);\r\n    const [loadingBookings, setLoadingBookings] = useState(true);\r\n    const [loadingDevotees, setLoadingDevotees] = useState(true);\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchBookings = async () => {\r\n            if (_id) {\r\n                setLoadingBookings(true);\r\n                try {\r\n                    const res = await fetch(`http://localhost:5000/api/bookings/view?panditid=${_id}`);\r\n                    const data = await res.json();\r\n                    setBookings(data);\r\n                } catch (error) {\r\n                    console.error('Failed to fetch bookings:', error);\r\n                    setBookings([]);\r\n                } finally {\r\n                    setLoadingBookings(false);\r\n                }\r\n            } else {\r\n                setBookings([]);\r\n                setLoadingBookings(false);\r\n            }\r\n        };\r\n        fetchBookings();\r\n    }, [_id]);\r\n\r\n    const completedCount = useMemo(() => bookings.filter(b => b.status === 'Accepted').length, [bookings]);\r\n    const pendingCount = useMemo(() => bookings.filter(b => b.status === 'Pending').length, [bookings]);\r\n    const rejectedCount = useMemo(() => bookings.filter(b => b.status === 'Rejected').length, [bookings]);\r\n    const totalBookingsCount = bookings.length;\r\n\r\n    const uniqueDevoteesCount = useMemo(() => {\r\n        const ids = new Set();\r\n        bookings.forEach(b => b.userid?._id && ids.add(b.userid._id));\r\n        return ids.size;\r\n    }, [bookings]);\r\n    const totalEarnings = completedCount * 500; // Assuming 500 per completed puja\r\n\r\n    const filteredBookings = useMemo(() => {\r\n        return bookings.filter(b => {\r\n            const dateMatch = filterDate ? b.puja_date === filterDate : true;\r\n            const nameMatch = b.userid?.name?.toLowerCase().includes(searchName.toLowerCase());\r\n            const statusMatch = filterStatus ? b.status === filterStatus : true;\r\n            return dateMatch && nameMatch && statusMatch;\r\n        }).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)); // Sort by most recent\r\n    }, [bookings, filterDate, searchName, filterStatus, filterResetTrigger]);\r\n\r\n    const devoteesList = useMemo(() => {\r\n        setLoadingDevotees(true);\r\n        const map = {};\r\n        bookings.forEach(b => {\r\n            if (b.userid?._id && !map[b.userid._id]) {\r\n                map[b.userid._id] = {\r\n                    id: b.userid._id,\r\n                    name: b.userid.name,\r\n                    phone: b.userid.phone,\r\n                    city: b.location\r\n                };\r\n            }\r\n        });\r\n        setLoadingDevotees(false);\r\n        return Object.values(map);\r\n    }, [bookings]);\r\n\r\n    const updateStatus = async (id, status) => {\r\n        try {\r\n            const res = await fetch(`http://localhost:5000/api/bookings/status/${id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ status }),\r\n            });\r\n            const data = await res.json();\r\n            if (data.booking) {\r\n                setBookings(prev => prev.map(b => (b._id === id ? data.booking : b)));\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to update status', err);\r\n            // TODO: Add user-facing error notification\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.clear();\r\n        navigate('/');\r\n    };\r\n\r\n    const statusIcon = {\r\n        Pending: <Timer size={18} color=\"#e5ae28\" />,\r\n        Accepted: <ShieldCheck size={18} color=\"#23cb7d\" />,\r\n        Rejected: <XCircle size={18} color=\"#e15d7c\" />,\r\n    };\r\n\r\n    const sidebarItems = [\r\n        { key: 'dashboard', label: 'Dashboard', icon: <Home size={24} /> },\r\n        { key: 'bookings', label: 'Bookings', icon: <CalendarCheck2 size={24} /> },\r\n        { key: 'devotees', label: 'Devotees', icon: <Users size={24} /> },\r\n        { key: 'chat', label: 'Chats', icon: <MessageCircle size={24} /> },\r\n    ];\r\n\r\n    const topServices = useMemo(() => {\r\n        const stats = {};\r\n        bookings.forEach(b => {\r\n            const svc = b.serviceid?.name;\r\n            if (svc) stats[svc] = (stats[svc] || 0) + 1;\r\n        });\r\n        return Object.entries(stats).sort((a, b) => b[1] - a[1]).slice(0, 3);\r\n    }, [bookings]);\r\n\r\n    const upcoming = useMemo(() => {\r\n        return bookings\r\n            .filter(b =>\r\n                new Date(b.puja_date) >= new Date(Date.now() - 24 * 60 * 60 * 1000) && b.status === \"Accepted\"\r\n            )\r\n            .sort((a, b) => new Date(a.puja_date) - new Date(b.puja_date))\r\n            .slice(0, 5);\r\n    }, [bookings]);\r\n\r\n    const recentBookings = useMemo(() => {\r\n        return bookings\r\n            .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n            .slice(0, 5);\r\n    }, [bookings]);\r\n\r\n\r\n    const clearFilters = () => {\r\n        setFilterDate('');\r\n        setSearchName('');\r\n        setFilterStatus('');\r\n        setFilterResetTrigger(t => t + 1);\r\n    };\r\n\r\n    const performanceMetrics = useMemo(() => {\r\n        const acceptRate = totalBookingsCount > 0 ? (completedCount / totalBookingsCount * 100).toFixed(1) : 0;\r\n        const avgResponseTime = \"2.5 hrs\";\r\n        return { acceptRate, avgResponseTime };\r\n    }, [completedCount, totalBookingsCount]);\r\n\r\n    const panditTips = [\r\n        \"Ensure prompt responses to pending bookings to improve your acceptance rate.\",\r\n        \"Keep your profile updated with your latest services and availability.\",\r\n        \"Engage with devotees via chat for better coordination and service.\",\r\n        \"Collect feedback from devotees to enhance your reputation.\"\r\n    ];\r\n\r\n    return (\r\n        <div className=\"pdash-bg\">\r\n            <div className=\"pandit-main-layout\">\r\n\r\n                {/* Sidebar */}\r\n                <aside className=\"pandit-sidebar\" aria-label=\"Pandit dashboard navigation\">\r\n                    <div className=\"pandit-profile-sidebar\">\r\n                        <img\r\n                            src=\"/images/subh.png\" // Ensure this path is correct\r\n                            alt=\"App Logo\"\r\n                            className=\"pandit-logo\"\r\n                        />\r\n                        <div className=\"sidebar-verification-status\" tabIndex={-1}>\r\n                            <small className={is_verified ? \"text-verified\" : \"text-pending\"}>\r\n                                {is_verified ? (\r\n                                    <>\r\n                                        <ShieldCheck size={14} /> Verified\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <Timer size={14} /> Not Verified\r\n                                    </>\r\n                                )}\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <nav role=\"navigation\" aria-label=\"Main dashboard pages\">\r\n                        {sidebarItems.map(item => (\r\n                            <div\r\n                                key={item.key}\r\n                                className={`sidebar-navitem${currentPage === item.key ? ' active' : ''}`}\r\n                                onClick={() => setCurrentPage(item.key)}\r\n                                tabIndex={0}\r\n                                role=\"button\"\r\n                                aria-current={currentPage === item.key ? \"page\" : undefined}\r\n                                aria-label={item.label}\r\n                                onKeyDown={e => { if (e.key === 'Enter' || e.key === ' ') setCurrentPage(item.key); }}\r\n                            >\r\n                                {item.icon}\r\n                                <span className=\"sidebar-item-label\">{item.label}</span>\r\n                            </div>\r\n                        ))}\r\n                    </nav>\r\n\r\n                    {/* Logout button moved to be the last item in the sidebar's flex column */}\r\n                    <button\r\n                        className=\"logout-btn sidebar-logout-btn\"\r\n                        onClick={handleLogout}\r\n                        aria-label=\"Logout from dashboard\"\r\n                        type=\"button\"\r\n                    >\r\n                        <LogOut size={22} /> Logout\r\n                    </button>\r\n                </aside>\r\n\r\n                {/* Main Content */}\r\n                <main className=\"pandit-content\" aria-hidden={activeChatDevoteeId ? true : false}>\r\n                    <DashboardHeader userName={name} userEmail={email} />\r\n\r\n                    <header className=\"pandit-header-row2\" aria-live=\"polite\">\r\n                        <h1 className=\"pandit-heading\">{pages[currentPage]}</h1>\r\n                    </header>\r\n\r\n                    {/* Dashboard Page */}\r\n                    {currentPage === 'dashboard' && (\r\n                        <>\r\n                            <WelcomeSection userName={name} />\r\n\r\n                            <motion.div\r\n                                className=\"pandit-profile-card animate-in\"\r\n                                initial={{ opacity: 0, y: 18 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ duration: 0.5 }}\r\n                            >\r\n                                <div className=\"pandit-profile-pic\" aria-label=\"Pandit profile picture and status\">\r\n                                    {profile_photo_url ? (\r\n                                        <img src={profile_photo_url} alt={`${name}'s profile`} className=\"pandit-avatar-img\" />\r\n                                    ) : (\r\n                                        <UserCircle2 color=\"#ffecb3\" size={108} className=\"pandit-avatar\" aria-hidden=\"true\" />\r\n                                    )}\r\n                                    <span\r\n                                        className={is_verified ? 'pdash-badge verified' : 'pdash-badge notverified'}\r\n                                        aria-live=\"polite\"\r\n                                        aria-atomic=\"true\"\r\n                                    >\r\n                                        {is_verified ? <><ShieldCheck size={18} /> Verified</> : <><Timer size={18} /> Not Verified</>}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"pandit-profile-info\">\r\n                                    <h2 tabIndex={-1}>{name || 'Pandit Ji'}</h2>\r\n                                    <p><strong>City:</strong> {city || 'N/A'}</p>\r\n                                    <p><strong>Experience:</strong> {experienceYears || '--'} years</p>\r\n                                    <div className=\"pandit-profile-row\">\r\n                                        <span><Phone style={{ marginRight: 4 }} size={18} /> {phone || 'N/A'}</span>\r\n                                        <span><b><MessageCircle size={18} style={{ marginBottom: -3 }} /></b> {(languages && languages.join(', ')) || 'N/A'}</span>\r\n                                        <span><Star style={{ marginBottom: -3 }} size={18} /> {speciality || 'Puja & Rituals'}</span>\r\n                                    </div>\r\n                                    <button\r\n                                        className=\"stats-toggle-btn\"\r\n                                        onClick={() => setShowStats(s => !s)}\r\n                                        aria-expanded={showStats}\r\n                                        aria-controls=\"stats-section\"\r\n                                        type=\"button\"\r\n                                    >\r\n                                        {showStats ? 'Hide Stats ▲' : 'Show Stats ▼'}\r\n                                    </button>\r\n                                    <motion.div\r\n                                        id=\"stats-section\"\r\n                                        style={{ overflow: 'hidden' }}\r\n                                        initial={{ height: 0, opacity: 0 }}\r\n                                        animate={{ height: showStats ? 'auto' : 0, opacity: showStats ? 1 : 0 }}\r\n                                        transition={{ duration: 0.3 }}\r\n                                        aria-live=\"polite\"\r\n                                    >\r\n                                        <div className=\"stats-box\" style={{ gap: 26 }}>\r\n                                            <div className=\"stats-item\" aria-label={`Accepted bookings: ${completedCount}`}>\r\n                                                <ShieldCheck size={26} color=\"#4CAF50\" aria-hidden=\"true\" />\r\n                                                <span className=\"stats-num\">{completedCount}</span>\r\n                                                <span>Accepted</span>\r\n                                            </div>\r\n                                            <div className=\"stats-item\" aria-label={`Pending bookings: ${pendingCount}`}>\r\n                                                <Timer size={26} color=\"#ffb300\" aria-hidden=\"true\" />\r\n                                                <span className=\"stats-num\">{pendingCount}</span>\r\n                                                <span>Pending</span>\r\n                                            </div>\r\n                                            <div className=\"stats-item\" aria-label={`Rejected bookings: ${rejectedCount}`}>\r\n                                                <XCircle size={26} color=\"#e74c3c\" aria-hidden=\"true\" />\r\n                                                <span className=\"stats-num\">{rejectedCount}</span>\r\n                                                <span>Rejected</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                </div>\r\n                            </motion.div>\r\n\r\n                            {/* Dashboard Cards */}\r\n                            <motion.div\r\n                                className=\"pandit-dashboard-cards\"\r\n                                initial={{ opacity: 0, y: 15 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ duration: 0.6 }}\r\n                            >\r\n                                <div className=\"dash-card gradientblue\" aria-label={`Devotees: ${uniqueDevoteesCount}`}>\r\n                                    <Users size={32} color=\"#cc5500\" className=\"dash-card-icon\" aria-hidden=\"true\" />\r\n                                    <div>\r\n                                        <span className=\"dash-card-label\">Devotees</span>\r\n                                        <span className=\"dash-card-value\">{uniqueDevoteesCount}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"dash-card gradientmint\" aria-label={`Bookings: ${bookings.length}`}>\r\n                                    <CalendarCheck2 size={32} color=\"#4CAF50\" className=\"dash-card-icon\" aria-hidden=\"true\" />\r\n                                    <div>\r\n                                        <span className=\"dash-card-label\">Total Bookings</span>\r\n                                        <span className=\"dash-card-value\">{bookings.length}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"dash-card gradientyellow\" aria-label={`Chats: ${uniqueDevoteesCount}`}>\r\n                                    <MessageCircle size={32} color=\"#ff9800\" className=\"dash-card-icon\" aria-hidden=\"true\" />\r\n                                    <div>\r\n                                        <span className=\"dash-card-label\">Active Chats</span>\r\n                                        <span className=\"dash-card-value\">{uniqueDevoteesCount}</span> {/* Placeholder for actual active chats */}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"dash-card gradientpink\" aria-label={`Earnings: ₹${totalEarnings}`}>\r\n                                    <IndianRupee size={32} color=\"#e65100\" className=\"dash-card-icon\" aria-hidden=\"true\" />\r\n                                    <div>\r\n                                        <span className=\"dash-card-label\">Total Earnings</span>\r\n                                        <span className=\"dash-card-value\">₹{totalEarnings}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n\r\n                            {/* New: Performance Metrics Widget */}\r\n                            <motion.div\r\n                                className=\"widget performance-metrics\"\r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ duration: 0.6, delay: 0.3 }}\r\n                                tabIndex={-1}\r\n                            >\r\n                                <h3><Zap size={22} aria-hidden=\"true\" style={{ marginRight: 6 }} /> Your Performance Insights</h3>\r\n                                <div className=\"metrics-grid\">\r\n                                    <div className=\"metric-item\">\r\n                                        <span className=\"metric-label\">Acceptance Rate</span>\r\n                                        <span className=\"metric-value\" style={{ color: performanceMetrics.acceptRate >= 80 ? '#4CAF50' : '#ffb300' }}>\r\n                                            {performanceMetrics.acceptRate}% {performanceMetrics.acceptRate >= 80 ? <TrendingUp size={18} /> : <TrendingDown size={18} color=\"#e74c3c\" />}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"metric-item\">\r\n                                        <span className=\"metric-label\">Avg. Response Time</span>\r\n                                        <span className=\"metric-value\">{performanceMetrics.avgResponseTime}</span>\r\n                                    </div>\r\n                                    <div className=\"metric-item\">\r\n                                        <span className=\"metric-label\">Total Pujas</span>\r\n                                        <span className=\"metric-value\">{completedCount}</span>\r\n                                    </div>\r\n                                    <div className=\"metric-item\">\r\n                                        <span className=\"metric-label\">Devotee Rating</span>\r\n                                        <span className=\"metric-value\">4.8 <Star size={18} color=\"#FFD700\" style={{ verticalAlign: 'middle' }} /></span>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                            <hr className=\"divider\" />\r\n\r\n                            {/* Extra Widgets */}\r\n                            <div className=\"dashboard-widgets\" role=\"region\" aria-label=\"Dashboard extra widgets\">\r\n\r\n                                {/* Upcoming pujas widget */}\r\n                                <div className=\"widget upcoming-pujas\" tabIndex={-1}>\r\n                                    <h3><Clock3 size={22} aria-hidden=\"true\" style={{ marginRight: 6 }} /> Upcoming Pujas</h3>\r\n                                    {loadingBookings ? (\r\n                                        <p className=\"loading-message\">Loading upcoming pujas...</p>\r\n                                    ) : upcoming.length === 0 ? (\r\n                                        <p className=\"empty-state-message\">No upcoming pujas.</p>\r\n                                    ) : (\r\n                                        <ul>\r\n                                            {upcoming.map(b => {\r\n                                                const daysDiff = Math.ceil((new Date(b.puja_date) - new Date()) / (1000 * 60 * 60 * 24));\r\n                                                let tag = '';\r\n                                                let tagColor = '';\r\n                                                if (daysDiff < 1) { tag = 'Today'; tagColor = '#e65100'; } // Darker saffron for today\r\n                                                else if (daysDiff === 1) { tag = 'Tomorrow'; tagColor = '#ffb300'; } // Lighter saffron\r\n                                                else { tag = `In ${daysDiff} days`; tagColor = '#944b00'; } // A spiritual brown\r\n                                                return (\r\n                                                    <li key={b._id}>\r\n                                                        <span><ArrowRight size={14} aria-hidden=\"true\" /> {b.pujaId?.name || \"Puja\"} – {new Date(b.puja_date).toLocaleDateString('en-IN')}</span>\r\n                                                        <span style={{ backgroundColor: tagColor }} className=\"date-tag\" aria-label={`Date tag: ${tag}`}>{tag}</span>\r\n                                                    </li>\r\n                                                );\r\n                                            })}\r\n                                        </ul>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Recent Activity Widget */}\r\n                                <div className=\"widget recent-activity\" tabIndex={-1}>\r\n                                    <h3><Clock size={22} aria-hidden=\"true\" style={{ marginRight: 6 }} /> Recent Activity</h3>\r\n                                    {loadingBookings ? (\r\n                                        <p className=\"loading-message\">Loading recent activity...</p>\r\n                                    ) : recentBookings.length === 0 ? (\r\n                                        <p className=\"empty-state-message\">No recent bookings.</p>\r\n                                    ) : (\r\n                                        <ul>\r\n                                            {recentBookings.map(b => (\r\n                                                <li key={b._id} className={`activity-item ${b.status.toLowerCase()}`}>\r\n                                                    <span className=\"activity-status-dot\" style={{ backgroundColor: b.status === 'Accepted' ? '#4CAF50' : b.status === 'Pending' ? '#ffb300' : '#e74c3c' }}></span>\r\n                                                    <span>{b.userid?.name || 'Devotee'} - {b.pujaId?.name || 'Puja'} (<strong className=\"status-text\">{b.status}</strong>)</span>\r\n                                                    <small>{new Date(b.createdAt).toLocaleDateString('en-IN')}</small>\r\n                                                </li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Top services widget */}\r\n                                <div className=\"widget top-services\" tabIndex={-1}>\r\n                                    <h3><Star size={22} aria-hidden=\"true\" style={{ marginRight: 6 }} /> Top Services</h3>\r\n                                    {loadingBookings ? (\r\n                                        <p className=\"loading-message\">Loading top services...</p>\r\n                                    ) : topServices.length === 0 ? (\r\n                                        <p className=\"empty-state-message\">No services data available.</p>\r\n                                    ) :\r\n                                        <ul>\r\n                                            {topServices.map(([svc, count]) => (\r\n                                                <li key={svc}>{svc}: <strong>{count} bookings</strong></li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    }\r\n                                </div>\r\n\r\n                                {/* New: Pandit Tips Widget */}\r\n                                <div className=\"widget pandit-tips\" tabIndex={-1}>\r\n                                    <h3><Lamp size={22} aria-hidden=\"true\" style={{ marginRight: 6 }} /> Pandit Tips</h3>\r\n                                    <ul>\r\n                                        {panditTips.map((tip, index) => (\r\n                                            <li key={index}><ArrowRight size={14} aria-hidden=\"true\" /> {tip}</li>\r\n                                        ))}\r\n                                    </ul>\r\n                                </div>\r\n\r\n                                {/* Offers banner example */}\r\n                                <div className=\"offer-banner\" tabIndex={-1} aria-live=\"polite\">\r\n                                    <Gift size={22} style={{ marginRight: 8, color: 'white' }} aria-hidden=\"true\" />\r\n                                    <span role=\"alert\" aria-atomic=\"true\">This Shravan: 25% Off on Rudrabhishek Pujas! Book Now </span>\r\n                                    <button type=\"button\" onClick={() => alert('Offer details coming soon!')}>See Details</button>\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    {/* Bookings Page */}\r\n                    {currentPage === 'bookings' && (\r\n                        <>\r\n                            <motion.div\r\n                                className=\"pandit-filters animate-in\"\r\n                                initial={{ opacity: 0, y: 14 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ duration: 0.45 }}\r\n                            >\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={filterDate}\r\n                                    className=\"pandit-input\"\r\n                                    onChange={e => setFilterDate(e.target.value)}\r\n                                    aria-label=\"Filter bookings by date\"\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search by devotee name\"\r\n                                    value={searchName}\r\n                                    onChange={e => setSearchName(e.target.value)}\r\n                                    className=\"pandit-input\"\r\n                                    aria-label=\"Search bookings by devotee name\"\r\n                                />\r\n                                <select\r\n                                    value={filterStatus}\r\n                                    onChange={e => setFilterStatus(e.target.value)}\r\n                                    className=\"pandit-select\"\r\n                                    aria-label=\"Filter bookings by status\"\r\n                                >\r\n                                    <option value=\"\">All Status</option>\r\n                                    <option value=\"Pending\">Pending</option>\r\n                                    <option value=\"Accepted\">Accepted</option>\r\n                                    <option value=\"Rejected\">Rejected</option>\r\n                                </select>\r\n                                <button\r\n                                    className=\"clear-filters-btn\"\r\n                                    onClick={clearFilters}\r\n                                    aria-label=\"Clear all filters\"\r\n                                    type=\"button\"\r\n                                >\r\n                                    Clear Filters\r\n                                </button>\r\n                            </motion.div>\r\n                            {loadingBookings ? (\r\n                                <p className=\"loading-message\">Loading bookings...</p>\r\n                            ) : (\r\n                                <>\r\n                                    <p className=\"pandit-count\" aria-live=\"polite\" aria-atomic=\"true\">\r\n                                        Showing {filteredBookings.length} booking{filteredBookings.length !== 1 ? 's' : ''}\r\n                                    </p>\r\n\r\n                                    {/* Bookings List */}\r\n                                    <div className=\"pandit-bookings-grid\" role=\"list\" aria-label=\"Filtered bookings list\">\r\n                                        <AnimatePresence>\r\n                                            {filteredBookings.length ? filteredBookings.map((b, i) => (\r\n                                                <motion.div\r\n                                                    key={b._id}\r\n                                                    className={`pandit-booking-card ${b.status.toLowerCase()}`}\r\n                                                    role=\"listitem\"\r\n                                                    initial={{ opacity: 0, y: 12 }}\r\n                                                    animate={{ opacity: 1, y: 0 }}\r\n                                                    exit={{ opacity: 0, y: 12 }}\r\n                                                    transition={{ delay: 0.07 * i }}\r\n                                                    tabIndex={0}\r\n                                                    aria-describedby={`booking-desc-${b._id}`}\r\n                                                >\r\n                                                    <div className=\"pandit-booking-head\">\r\n                                                        <span className=\"booking-devotee\">{b.userid?.name || 'N/A'}</span>\r\n                                                        <span className={`pandit-status ${b.status.toLowerCase()}`}>\r\n                                                            {statusIcon[b.status]} {b.status}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"pandit-booking-row\" id={`booking-desc-${b._id}`}>\r\n                                                        <span><Phone size={16} aria-hidden=\"true\" /> {b.userid?.phone || 'N/A'}</span>\r\n                                                        <span><Users size={16} aria-hidden=\"true\" /> {b.serviceid?.name || 'N/A'}</span>\r\n                                                    </div>\r\n                                                    <div className=\"pandit-booking-row\">\r\n                                                        <span><Lamp size={16} aria-hidden=\"true\" /> <b>Puja:</b> {b.pujaId?.name || 'N/A'}</span>\r\n                                                        <span><Calendar size={16} aria-hidden=\"true\" /> <b>Date:</b> {new Date(b.puja_date).toLocaleDateString('en-IN')}</span>\r\n                                                        <span><Clock size={16} aria-hidden=\"true\" /> <b>Time:</b> {b.puja_time}</span>\r\n                                                    </div>\r\n                                                    <div className=\"pandit-booking-row\">\r\n                                                        <span><MapPin size={16} aria-hidden=\"true\" /> <b>Location:</b> {b.location || 'N/A'}</span>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        className=\"chat-from-booking-btn\"\r\n                                                        onClick={() => { setActiveChatDevoteeId(b.userid?._id); setActiveChatDevoteeName(b.userid?.name || 'Devotee'); }}\r\n                                                        disabled={!b.userid?._id}\r\n                                                        aria-label={`Chat with devotee ${b.userid?.name || 'Devotee'}`}\r\n                                                        type=\"button\"\r\n                                                    >\r\n                                                        Chat with Devotee\r\n                                                    </button>\r\n                                                    {b.status === 'Pending' && (\r\n                                                        <div className=\"pandit-buttons\" aria-label=\"Action buttons for pending booking\">\r\n                                                            <button\r\n                                                                onClick={() => updateStatus(b._id, 'Accepted')}\r\n                                                                className=\"accept-btn\"\r\n                                                                aria-label={`Accept booking for ${b.userid?.name || 'devotee'}`}\r\n                                                                type=\"button\"\r\n                                                            >\r\n                                                                <ShieldCheck size={16} /> Accept\r\n                                                            </button>\r\n                                                            <button\r\n                                                                onClick={() => updateStatus(b._id, 'Rejected')}\r\n                                                                className=\"reject-btn\"\r\n                                                                aria-label={`Reject booking for ${b.userid?.name || 'devotee'}`}\r\n                                                                type=\"button\"\r\n                                                            >\r\n                                                                <XCircle size={16} /> Reject\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </motion.div>\r\n                                            )) : (\r\n                                                <motion.div\r\n                                                    key=\"no-bookings\"\r\n                                                    className=\"pandit-nobookings\"\r\n                                                    initial={{ opacity: 0 }}\r\n                                                    animate={{ opacity: 1 }}\r\n                                                    aria-live=\"polite\"\r\n                                                    aria-atomic=\"true\"\r\n                                                    tabIndex={-1}\r\n                                                >\r\n                                                    No bookings found matching your filters.\r\n                                                </motion.div>\r\n                                            )}\r\n                                        </AnimatePresence>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </>\r\n                    )}\r\n\r\n                    {/* Devotees Page */}\r\n                    {currentPage === \"devotees\" && (\r\n                        <div className=\"pandit-devotee-list\" role=\"region\" aria-label=\"List of devotees\">\r\n                            <h3 className=\"devotee-list-title\" tabIndex={-1}><Users size={22} style={{ marginRight: 6 }} aria-hidden=\"true\" /> My Devotees ({devoteesList.length})</h3>\r\n                            {loadingDevotees ? (\r\n                                <p className=\"loading-message\">Loading devotees list...</p>\r\n                            ) : devoteesList.length === 0 ? (\r\n                                <div className=\"empty-state-message\" tabIndex={-1}>No devotees found yet.</div>\r\n                            ) : (\r\n                                <div className=\"devotees-table\" role=\"table\" aria-label=\"Devotees table\">\r\n                                    <div className=\"devotees-table-header\" role=\"rowgroup\">\r\n                                        <div role=\"columnheader\">Name</div><div role=\"columnheader\">Phone</div><div role=\"columnheader\">Location</div><div role=\"columnheader\">Chat</div>\r\n                                    </div>\r\n                                    <AnimatePresence>\r\n                                        {devoteesList.map(dev => (\r\n                                            <motion.div\r\n                                                className=\"devotees-table-row\"\r\n                                                key={dev.id}\r\n                                                role=\"row\"\r\n                                                tabIndex={0}\r\n                                                initial={{ opacity: 0, y: 6 }}\r\n                                                animate={{ opacity: 1, y: 0 }}\r\n                                                exit={{ opacity: 0, y: 6 }}\r\n                                                transition={{ duration: 0.3 }}\r\n                                            >\r\n                                                <div role=\"cell\">{dev.name}</div>\r\n                                                <div role=\"cell\">{dev.phone}</div>\r\n                                                <div role=\"cell\">{dev.city || 'N/A'}</div>\r\n                                                <div role=\"cell\">\r\n                                                    <button\r\n                                                        className=\"chat-devotee-btn\"\r\n                                                        onClick={() => { setActiveChatDevoteeId(dev.id); setActiveChatDevoteeName(dev.name || \"Devotee\"); }}\r\n                                                        aria-label={`Chat with devotee ${dev.name}`}\r\n                                                        type=\"button\"\r\n                                                    >\r\n                                                        <MessageCircle size={20} style={{ marginRight: 6 }} aria-hidden=\"true\" />\r\n                                                        Chat\r\n                                                    </button>\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        ))}\r\n                                    </AnimatePresence>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Chat Page (Guide) */}\r\n                    {currentPage === \"chat\" && (\r\n                        <div className=\"pandit-chat-guide\" tabIndex={0} aria-live=\"polite\" aria-atomic=\"true\">\r\n                            <h3><MessageCircle size={28} style={{ verticalAlign: 'middle', marginRight: 6 }} aria-hidden=\"true\" />\r\n                                Start Conversation</h3>\r\n                            <p>You can initiate a chat by clicking \"Chat with Devotee\" on any booking or devotee entry.</p>\r\n                            <p>All chat transcripts will appear here. **(Feature Coming Soon)**</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Chat Modal */}\r\n                    <AnimatePresence>\r\n                        {activeChatDevoteeId && (\r\n                            <ChatWindow\r\n                                userId={_id}\r\n                                panditId={activeChatDevoteeId}\r\n                                chatName={activeChatDevoteeName}\r\n                                onClose={() => setActiveChatDevoteeId(null)}\r\n                            />\r\n                        )}\r\n                    </AnimatePresence>\r\n\r\n                </main>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PanditDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}